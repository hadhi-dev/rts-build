import{j as e}from"./index-B52Xuj2X.js";import{r as o,h as F}from"./react-vendor-C96nFidc.js";import{y as k,C as D,am as R,K as L,M as b}from"./index-BrL9IDXO.js";import{B as g,g as S,D as E,I as J,C as B,a as P,L as T,b as W,c as $,d as I,A as z,p as Z,e as O,f as U}from"./InterviewTimeline-DrZ-xKlB.js";import{P as H}from"./PostAPI-Dm7qi3aC.js";import{L as K}from"./Loading-Cyqe9TbH.js";import{y as h}from"./ui-vendor-CrwEJxT6.js";import{m as t}from"./proxy-CmyyVjrD.js";import"./icons-vendor-D-G97rvP.js";import"./memoize-one.esm-DQq2xVVF.js";import"./inheritsLoose-MEHl_3-6.js";import"./react-lifecycles-compat.es-Bz2kNPGS.js";import"./moment-bKu5bFg9.js";import"./config-BbshSSl6.js";B.register(P,T,W,$,I,z,Z,O,U);const le=()=>{const[u,l]=o.useState(!0),[n,y]=o.useState(null),d=F();o.useEffect(()=>{j()},[]);const j=async()=>{l(!0);try{const s=localStorage.getItem("rts_user_uuid"),i=(await H("rts/dashboard/recruiter",{user_uuid:s})).data;i.code===200?y(i.data):h.error(i.message||"Failed to load dashboard")}catch(s){console.error("Dashboard fetch error:",s),h.error("Failed to load dashboard data")}finally{l(!1)}};if(u)return e.jsx(K,{});if(!n)return e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No data available"});const{metrics:r,jobs_by_status:m,applications_by_stage:c,jobs_by_client:x,recent_applications:f,top_jobs:N,monthly_trend:p}=n,v=[{title:"Clients",value:r.total_clients,icon:e.jsx(k,{className:"text-white text-2xl"}),color:"from-blue-500 to-blue-600"},{title:"Jobs Posted",value:r.total_jobs,icon:e.jsx(D,{className:"text-white text-2xl"}),color:"from-teal-500 to-teal-600"},{title:"Candidates",value:r.total_candidates,icon:e.jsx(R,{className:"text-white text-2xl"}),color:"from-orange-400 to-orange-500"},{title:"Applications",value:r.total_applications,icon:e.jsx(L,{className:"text-white text-2xl"}),color:"from-emerald-500 to-emerald-600"}],w={labels:m.map(s=>s.job_status),datasets:[{label:"Jobs Count",data:m.map(s=>s.count),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(239, 68, 68, 1)","rgba(251, 146, 60, 1)"],borderWidth:2}]},_={labels:c.map(s=>s.stage_name),datasets:[{label:"Applications Count",data:c.map(s=>s.count),backgroundColor:"rgba(99, 102, 241, 0.8)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:2,borderRadius:6}]},A={labels:p.map(s=>s.month),datasets:[{label:"Applications Over Time",data:p.map(s=>s.count),fill:!0,backgroundColor:"rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:3,tension:.4,pointRadius:5,pointBackgroundColor:"rgba(99, 102, 241, 1)",pointBorderColor:"#fff",pointBorderWidth:2}]},C={labels:x.map(s=>s.client_name),datasets:[{label:"Jobs Posted",data:x.map(s=>s.total_jobs),backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:2,borderRadius:6}]};return e.jsx("div",{className:"p-3 sm:p-4 md:p-6 rounded-lg bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen custom-scroll",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:v.map((s,a)=>e.jsxs(t.div,{className:`bg-gradient-to-br ${s.color} p-4 sm:p-5 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden relative`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:a*.08},whileHover:{y:-5},children:[e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"p-2 sm:p-2.5 rounded-xl bg-white/20 backdrop-blur-sm w-fit mb-2 sm:mb-3",children:s.icon}),e.jsx("p",{className:"text-white/90 text-xs sm:text-sm font-medium",children:s.title}),e.jsx("p",{className:"text-white text-2xl sm:text-3xl font-bold mt-1 sm:mt-2",children:s.value})]})]},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(t.div,{className:"bg-white p-4 sm:p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-5 sm:h-6 bg-blue-600 rounded mr-2 sm:mr-3"}),"Recent Applications"]}),e.jsx("div",{className:"overflow-x-auto max-h-64 sm:max-h-80 custom-scroll",children:e.jsxs("table",{className:"w-full text-xs sm:text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-2 sm:p-3 font-semibold text-gray-700 text-xs sm:text-sm",children:"Candidate"}),e.jsx("th",{className:"text-left p-2 sm:p-3 font-semibold text-gray-700 text-xs sm:text-sm",children:"Job"}),e.jsx("th",{className:"text-left p-2 sm:p-3 font-semibold text-gray-700 text-xs sm:text-sm",children:"Status"}),e.jsx("th",{className:"text-left p-2 sm:p-3 font-semibold text-gray-700 text-xs sm:text-sm",children:"Actions"})]})}),e.jsx("tbody",{children:f.map((s,a)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-2 sm:p-3 text-gray-800 font-medium text-xs sm:text-sm",children:s.candidate_name}),e.jsx("td",{className:"p-2 sm:p-3 text-gray-600 text-[10px] sm:text-xs",children:s.job_title}),e.jsx("td",{className:"p-2 sm:p-3",children:e.jsx("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-md text-[10px] sm:text-xs font-medium bg-emerald-100 text-emerald-700",children:s.status_name})}),e.jsx("td",{className:"p-2 sm:p-3 cursor-pointer",onClick:()=>d(`/rts/job_application/${s.job_app_uuid}`),children:e.jsx("button",{className:"p-2 text-emerald-600 text-xs font-semibold hover:scale-110 transition-all duration-200 flex items-center justify-center",children:e.jsx(b,{className:"text-base"})})})]},a))})]})})]}),e.jsxs(t.div,{className:"bg-white p-4 sm:p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.65},children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-5 sm:h-6 bg-rose-600 rounded mr-2 sm:mr-3"}),"Top Performing Jobs"]}),e.jsx("div",{className:"space-y-2 sm:space-y-3 max-h-64 sm:max-h-80 overflow-y-auto custom-scroll",children:N.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 sm:p-3 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200",children:[e.jsxs("div",{className:"flex-grow min-w-0 mr-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1.5 sm:mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-xs sm:text-sm line-clamp-1",children:s.job_title}),e.jsxs("span",{className:"px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-md text-[10px] sm:text-xs font-medium bg-green-100 text-green-700 whitespace-nowrap ml-2",children:[s.application_count," apps"]})]}),e.jsxs("div",{className:"flex items-center justify-start space-x-3",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-600 truncate",children:s.client_name}),e.jsx("span",{className:`inline-block px-1.5 sm:px-2 py-0.5 rounded text-[10px] font-medium ${s.job_status==="Open"?"bg-green-100 text-green-700":s.job_status==="Closed"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:s.job_status})]})]}),e.jsx("button",{onClick:()=>d(`/rts/jobs/${s.uuid}`),className:"p-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg text-xs font-semibold hover:shadow-md hover:scale-105 transition-all duration-200 flex items-center justify-center flex-shrink-0",title:`View details for ${s.job_title}`,children:e.jsx(b,{className:"text-sm"})})]},a))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(t.div,{className:"bg-white p-4 sm:p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-5 sm:h-6 bg-emerald-600 rounded mr-2 sm:mr-3"}),"Applications by Stage"]}),e.jsx("div",{className:"relative h-48 sm:h-64",children:e.jsx(g,{data:_,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:"#9CA3AF"},grid:{color:"#F3F4F6"}},x:{ticks:{color:"#9CA3AF"},grid:{color:"transparent"}}}}})})]}),e.jsxs(t.div,{className:"bg-white p-4 sm:p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.45},children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-5 sm:h-6 bg-teal-600 rounded mr-2 sm:mr-3"}),"Applications Trend"]}),e.jsx("div",{className:"relative h-48 sm:h-64",children:e.jsx(S,{data:A,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:"#9CA3AF"},grid:{color:"#F3F4F6"}},x:{ticks:{color:"#9CA3AF"},grid:{color:"transparent"}}}}})})]}),e.jsxs(t.div,{className:"bg-white p-4 sm:p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-5 sm:h-6 bg-orange-400 rounded mr-2 sm:mr-3"}),"Job Status Distribution"]}),e.jsx("div",{className:"relative h-48 sm:h-64 flex items-center justify-center",children:e.jsx(E,{data:w,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{font:{size:11},padding:15,color:"#374151"}}}}})})]}),e.jsxs(t.div,{className:"bg-white p-4 sm:p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.55},children:[e.jsxs("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-5 sm:h-6 bg-emerald-600 rounded mr-2 sm:mr-3"}),"Top Clients by Jobs"]}),e.jsx("div",{className:"relative h-48 sm:h-64",children:e.jsx(g,{data:C,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{color:"#9CA3AF"},grid:{color:"#F3F4F6"}},y:{ticks:{color:"#9CA3AF",font:{size:10}},grid:{color:"transparent"}}}}})})]})]})]}),e.jsx("div",{className:"xl:col-span-1",children:e.jsx(t.div,{className:"sticky top-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:e.jsx(J,{})})})]})})};export{le as default};

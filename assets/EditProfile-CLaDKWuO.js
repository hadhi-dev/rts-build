import{j as e}from"./index-B52Xuj2X.js";import{r as o,h as v}from"./react-vendor-C96nFidc.js";import{z as P,an as m}from"./index-BrL9IDXO.js";import{l as C}from"./rtsApi-Dl_EsLra.js";import{y as l}from"./ui-vendor-CrwEJxT6.js";import{c as f}from"./config-BbshSSl6.js";import"./icons-vendor-D-G97rvP.js";import"./GetAPI-C0R9K2iB.js";import"./PostAPI-Dm7qi3aC.js";const $=()=>{const n=localStorage.getItem("rts_user_uuid"),[u,p]=o.useState(""),[a,g]=o.useState(null),[d,x]=o.useState(""),[c,h]=o.useState(""),i=v();o.useEffect(()=>{(async()=>{if(!n)localStorage.clear(),i("/rts/login");else try{const r=await C(n);r?(p(r.user_name),g(r.user_image)):l.error("Something went wrong")}catch(r){console.error("Error fetching user profile:",r)}})()},[n,i]);const b=s=>{const r=s.target.files[0];g(r)},y=async s=>{if(s.preventDefault(),!d){l.error("Current password is required.");return}const r=new FormData;r.append("user_name",u),r.append("current_password",d),c&&r.append("new_password",c),a&&typeof a!="string"&&r.append("user_image",a);try{await w(`rts/users/${n}/profile`,r)?(l.success("Profile updated successfully"),i("/rts/dashboard")):l.error("Failed to update profile.")}catch(t){l.error("Error updating profile."),console.error("Error updating profile:",t)}},w=async(s,r)=>{try{const t=await fetch(`${f.API_URL}${s}`,{method:"Post",body:r});if(!t.ok){const N=await t.json();throw new Error(N.message||"Network response was not ok")}const j=await t.json();return{status:t.status,data:j}}catch(t){throw console.error("Error in PutAPI:",t),t}};return e.jsx("div",{className:"bg-gray-50 min-h-screen py-8 px-4 md:px-6",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6",children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 flex items-center",children:[e.jsx("span",{className:"w-1 h-8 bg-gradient-to-b from-emerald-600 to-teal-600 rounded mr-3"}),"Edit Profile"]}),e.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Update your profile information and password"})]}),e.jsxs("form",{onSubmit:y,className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center py-6 border-b border-gray-100",children:[e.jsxs("div",{className:"relative group",children:[a?e.jsx("img",{src:typeof a=="string"?`${f.API_URL}rts/file/get-file?file=${a}`:URL.createObjectURL(a),alt:"Profile",className:"h-32 w-32 rounded-full object-cover shadow-lg"}):e.jsx("div",{className:"h-32 w-32 rounded-full bg-gradient-to-br from-emerald-100 to-teal-100 flex items-center justify-center shadow-lg",children:e.jsx(P,{className:"h-20 w-20 text-emerald-400"})}),e.jsxs("label",{className:"absolute inset-0 rounded-full bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center cursor-pointer",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:"Change Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]}),e.jsx("span",{className:"text-sm text-gray-500 mt-4",children:"Click to change your profile picture"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-3",children:"Username"}),e.jsx("input",{type:"text",value:u,onChange:s=>p(s.target.value),className:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white"})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(m,{className:"text-emerald-600 mr-2"}),"Change Password"]}),e.jsx("span",{className:"text-gray-500 text-xs font-medium bg-gray-100 px-3 py-1 rounded-full",children:"Optional"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"password",value:d,onChange:s=>x(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter current password"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{className:"absolute left-4 top-3.5 text-gray-400"}),e.jsx("input",{type:"password",value:c,onChange:s=>h(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200 bg-gray-50 hover:bg-white",placeholder:"Enter new password"})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t border-gray-100",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3 px-6 rounded-lg shadow-md hover:shadow-lg transition-all duration-300 font-semibold",children:"Update Profile"}),e.jsx("button",{type:"button",onClick:()=>i("/rts/dashboard"),className:"flex-1 bg-gray-100 text-gray-700 py-3 px-6 rounded-lg hover:bg-gray-200 transition-colors duration-200 font-semibold",children:"Cancel"})]})]})]})})};export{$ as default};

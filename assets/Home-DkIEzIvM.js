import{j as e,m as x,u as H,F as V,r as l,v as Y,x as q,y as K,z as G,A as z,L as M,B as J,D as W,E as Z,G as X,H as ee,I as te,J as se}from"./index-DPmwzKAO.js";import{c as L}from"./config-BbshSSl6.js";import{G as _}from"./GetAPI-C0R9K2iB.js";import{A as ae}from"./CONSTANTS-W_7WszVf.js";import{F as ne,a as Q,b as ie,c as oe,d as re}from"./index-DZs1PTXP.js";import{S as I}from"./sweetalert2.esm.all-CAQlxK8Y.js";import{P as le}from"./PostAPI-Dm7qi3aC.js";import{A as ce}from"./index-kHxzMTn7.js";import{B as R}from"./ButtonMini-BuupxJqu.js";const de=({course:o,isSelected:i,onClick:d,IsPaymentUnderProcess:c,IsPaid:r,IsCertified:u,isDurationComplete:a})=>{const h={initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},f={hover:{scale:1.05}};return e.jsxs(x.div,{className:`mb-2 cursor-pointer rounded p-3 text-gray-800 ${i?"bg-blue-100":"bg-white"}`,onClick:()=>d(o.id),initial:"initial",animate:"animate",exit:"exit",variants:h,children:[e.jsx("h3",{className:"mb-2 flex items-center justify-between text-lg font-bold",children:e.jsxs("span",{children:[o.CourseName," "]})}),e.jsx("p",{className:"mb-1 text-sm",children:o.ShortDescription}),e.jsx("div",{className:"flex justify-end",children:u?a?e.jsx("span",{children:e.jsx("a",{className:"rounded-md bg-blue-700 p-1 px-2 text-xs font-bold text-white hover:bg-blue-600",href:`${L.API_URL}certificate/${o.UUID}`,target:"_blank",rel:"noopener noreferrer",children:"Certificate"},o.UUID)}):e.jsx(x.button,{className:"rounded-md bg-amber-700 p-1 px-2 text-xs font-bold text-white hover:bg-amber-600",variants:f,whileHover:"hover",children:"Please wait for Course Duration to Complete"}):r?e.jsx("span",{children:e.jsx(x.button,{className:"rounded-md bg-blue-700 p-1 px-2 text-xs font-bold text-white hover:bg-blue-600",onClick:()=>d(o.id),variants:f,whileHover:"hover",children:"Open"})}):e.jsx(x.button,{className:"rounded-md bg-amber-700 p-1 px-2 text-xs font-bold text-white hover:bg-amber-600",onClick:()=>d(o.id),variants:f,whileHover:"hover",children:"Under Payment Verification"})})]})},me=({username:o,email:i})=>{const d=o?o.charAt(0).toUpperCase():"";return e.jsxs("div",{className:"flex hidden items-center gap-3 md:flex",children:[e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-blue-700 text-2xl font-bold text-white backdrop-blur-md backdrop-opacity-70",children:d}),o&&e.jsxs("div",{className:"hidden flex-col md:flex",children:[e.jsx("p",{className:"text-lg font-semibold text-gray-800",children:o}),e.jsx("p",{className:"text-xs font-medium text-gray-600",children:i})]})]})},xe=({user:o})=>{const i=H();if(!o)return i("/login"),null;const d=()=>{localStorage.clear(),i("/login")};return e.jsx("div",{className:"sticky top-0 z-50 border-b border-gray-200 bg-white shadow",children:e.jsxs("div",{className:"flex items-center justify-between px-2 py-2 md:px-4",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("img",{src:ae.LOGO,alt:"",className:"h-16 w-auto p-2"})}),e.jsxs("div",{className:"ml-auto flex items-center space-x-4",children:[e.jsx(me,{username:o.username,email:o.email}),e.jsx("button",{title:"Logout",className:"flex items-center rounded-full bg-white p-4 text-blue-600 hover:bg-blue-600 hover:text-white",onClick:d,children:e.jsx(V,{})})]})]})})},ue=({course:o,onClick:i})=>{const[d,c]=l.useState(!1),r={initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20}},u={open:{height:"auto"},closed:{height:0}},a={hover:{scale:1.05}},h=()=>{c(!d)};return e.jsxs(x.div,{className:"mb-4 w-full overflow-hidden rounded-lg bg-white text-gray-800 shadow-md hover:bg-blue-50",initial:"initial",animate:"animate",exit:"exit",variants:r,children:[e.jsxs("div",{className:"flex flex-col p-4 lg:flex-row",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{onClick:h,className:"mb-2 flex cursor-pointer items-center",children:[e.jsx("span",{className:"mr-2 cursor-pointer",children:d?e.jsx(Y,{size:20}):e.jsx(q,{size:20})}),e.jsx("h3",{className:"cursor-pointer text-lg font-bold text-blue-700",children:o.CourseName})]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.ShortDescription})]}),e.jsx("div",{className:"mt-2 flex items-center lg:mt-0 lg:ml-auto",children:e.jsxs(x.button,{className:"flex items-center rounded-md bg-blue-700 px-4 py-2 text-xs font-bold text-white hover:bg-blue-600",onClick:()=>i(o.CourseID),variants:a,whileHover:"hover",children:["Enroll Now ",e.jsx(K,{className:"ml-2"})]})})]}),e.jsx(x.div,{className:"px-4 text-sm text-gray-700",dangerouslySetInnerHTML:{__html:o.Description},variants:u,initial:"closed",animate:d?"open":"closed"})]})},he=({homehero:o,newcourses:i,enrollNewCourse:d})=>{function c(r,u){const a=new Date(r),h=new Date,f=u*60*60*1e3;return h-a>=f}return e.jsx(x.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.5},className:"hero-section h-full rounded-md bg-gray-50 p-6 pt-4 text-gray-800",children:e.jsx("div",{className:"container mx-auto text-left",children:e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[e.jsx("h1",{className:"mb-1 text-3xl font-bold text-blue-700",children:"Welcome to Raah Tech Services"}),e.jsx("p",{className:"text-md mb-4",children:"Unlock Your Potential and Gain Real-world Experience"}),i.length>0?e.jsxs("div",{className:"flex flex-wrap rounded bg-white p-2",children:[e.jsxs("div",{className:"mb-4 flex items-center",children:[e.jsx(G,{className:"mr-2 text-lg text-blue-700"}),e.jsx("h2",{className:"border-b-2 border-blue-700 pb-1 text-lg font-bold text-blue-700",children:"New Courses"})]}),i.length>0&&i.map((r,u)=>e.jsx(ue,{course:r,onClick:a=>{d(a)}},r.CourseID))]}):null,e.jsxs("div",{className:"mt-8 rounded-md bg-white p-4",children:[e.jsxs("p",{className:"mb-4 flex text-left text-sm font-bold text-green-700 uppercase",children:[e.jsx(z,{size:20})," ",e.jsx("span",{className:"pl-2",children:"Access your Certificates"})," "]}),e.jsx("div",{className:"flex flex-wrap justify-start gap-4",children:o.map(r=>r.IsCertified&&c(r.created_datetime,r.CourseCode)?e.jsx("a",{className:"rounded bg-blue-700 p-1 px-2 text-sm font-bold text-white ring-2 transition duration-300 hover:bg-blue-600",href:`${L.API_URL}certificate/${r.UUID}`,target:"_blank",rel:"noopener noreferrer",children:r.CourseName},r.UUID):null)})]})]})})})},fe=({TaskID:o,RegistrationIDPK:i,handleTaskCompletion:d,handleToggle:c})=>{const[r,u]=l.useState(!1),[a,h]=l.useState([]),[f,w]=l.useState({}),[m,g]=l.useState(-1),[v,T]=l.useState(null),[N,P]=l.useState(3600),S=l.useRef(null),E=async()=>{try{u(!0);const s=await _(`get_mcq_intern/${o}`);s.code===200&&s.data?h(s.data.mcqs):h([])}catch(s){console.error("Error fetching MCQ data:",s),h([])}finally{u(!1)}};l.useEffect(()=>{E()},[]),l.useEffect(()=>(N>0&&m>=0?S.current=setInterval(()=>{P(s=>s-1)},1e3):N===0&&(clearInterval(S.current),alert("Time's up! Your Task Time has expired. The page will now refresh."),window.location.reload()),()=>clearInterval(S.current)),[N,m]);const C=s=>{const t=Math.floor(s/60),n=s%60;return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},D=s=>{w(t=>({...t,[m]:s}))},j=()=>{m<a.length-1&&g(m+1)},k=()=>{m>0&&g(m-1)},B=()=>{I.fire({title:"Start Test",text:"Are you ready to begin?",icon:"info",showCancelButton:!0,confirmButtonText:"Ready for Test",cancelButtonText:"Later, not ready yet",customClass:{confirmButton:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 rounded text-white mr-2",cancelButton:"px-4 py-2 bg-gray-500 hover:bg-gray-600 rounded text-white"},buttonsStyling:!1}).then(s=>{s.isConfirmed?(I.fire({title:"Test Started",text:"Good luck!",icon:"success",customClass:{confirmButton:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded text-white"},buttonsStyling:!1}),w({}),g(0),c(!1)):s.dismiss===I.DismissReason.cancel&&I.fire({title:"Test Postponed",text:"Take your time!",icon:"info",customClass:{confirmButton:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 rounded text-white"},buttonsStyling:!1})})},U=()=>{g(-1)},F=async()=>{const s=a.findIndex((t,n)=>!f[n]);if(s!==-1)g(s),I.fire({title:"Incomplete Test",text:"Please answer all questions before submitting.",icon:"warning",confirmButtonText:"Okay",customClass:{confirmButton:"px-4 py-2 bg-cyan-500 hover:bg-cyan-600 rounded text-white mr-2"},buttonsStyling:!1});else{const t=["A","B","C","D"],n=a.map((b,p)=>({QuestionID:b.QuestionID,selectedOption:t[b.options.indexOf(f[p])]}));I.fire({title:"Confirm Final Submission",text:"Are you sure you want to submit your answers? No more changes can be made after submission.",icon:"question",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",customClass:{confirmButton:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded text-white mr-2",cancelButton:"px-4 py-2 bg-gray-500 hover:bg-gray-600 rounded text-white"},buttonsStyling:!1}).then(async b=>{if(b.isConfirmed){try{const p=localStorage.getItem("uid"),{status:A,data:y}=await le("mcq_submit",{data:{RegistrationIDPK:i,uid:p,TaskID:o,submissionData:n}});A===200&&(T(y.score?y.score:null),setTimeout(()=>{d(),window.location.href="/home"},5e3))}catch(p){console.error("Error submitting test:",p),I.fire({title:"Error",text:"An error occurred while submitting the test. Please try again later.",icon:"error",confirmButtonText:"OK",customClass:{confirmButton:"px-4 py-2 bg-red-500 hover:bg-red-600 rounded text-white"},buttonsStyling:!1})}g(a.length),I.fire({title:"Test Submitted",text:"Thank you for completing the test!",icon:"success",confirmButtonText:"OK",customClass:{confirmButton:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded text-white"},buttonsStyling:!1})}})}};return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-2 flex min-h-full flex-col items-center justify-start",children:[r&&e.jsx(M,{}),!r&&e.jsx("div",{className:"w-full",children:e.jsxs(ce,{children:[m===-1&&e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex h-full flex-col items-center justify-center",children:e.jsxs("div",{className:"w-full rounded p-6 text-center",children:[e.jsxs("div",{className:"mb-4 flex flex-col items-center justify-center",children:[e.jsx(ne,{className:"mr-4 animate-bounce text-4xl text-blue-600"})," ",e.jsx("h1",{className:"p-2 text-xl font-medium",children:"Embark on Your Quest"})]}),e.jsx("button",{onClick:B,className:"rounded-lg bg-blue-600 px-28 py-3 text-white transition hover:bg-blue-700",children:"Start"})]})},"start"),m>=0&&m<a.length&&e.jsxs(x.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},className:"bg-white-50 mx-auto rounded-lg border-2 border-blue-300 p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"mb-4 flex flex-col items-center justify-between",children:[e.jsxs("div",{className:"text-md flex w-full justify-between",children:[e.jsxs("span",{className:"font-medium",children:[" ","Question ",m+1,"/",a.length," "]}),e.jsxs("span",{className:"font-semibold",children:["Time Left: ",C(N)]})]}),e.jsx("div",{className:"h-2 w-full rounded-full bg-gray-300",children:e.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${(m+1)/a.length*100}%`}})})]}),e.jsx("p",{className:"text-md font-semibold",children:a[m].question})]}),e.jsx("div",{className:"mb-6",children:a[m].options.map((s,t)=>e.jsx("label",{className:"mb-2 block cursor-pointer rounded p-2 text-sm hover:bg-blue-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:`question-${m}`,value:s,checked:f[m]===s,onChange:()=>D(s),className:"mr-2"}),e.jsx("span",{className:"leading-tight",children:s})]})},t))}),e.jsxs("div",{className:"flex justify-between",children:[m===0?e.jsx("button",{onClick:U,className:"rounded-lg bg-red-600 px-4 py-2 text-white transition hover:bg-red-700",children:"Close Test"}):e.jsx("button",{onClick:k,className:"rounded-lg border-2 border-blue-600 px-4 py-2 text-blue-600 transition hover:bg-blue-100",children:"Previous"}),m<a.length-1?e.jsx("button",{onClick:j,className:"rounded-lg bg-blue-600 px-4 py-2 text-white transition hover:bg-blue-700",children:"Next"}):e.jsx("button",{onClick:F,className:"rounded-lg bg-green-600 px-4 py-2 text-white transition hover:bg-green-700",children:"Submit"})]})]},"question"),m===a.length&&e.jsx(x.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"flex h-full flex-col items-center justify-center",children:e.jsx("div",{className:"rounded-lg bg-white p-6 text-center shadow-lg",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-4",children:[e.jsx(Q,{className:"mr-4 animate-bounce text-6xl text-green-500"}),e.jsx("h1",{className:"mt-4 text-2xl font-medium",children:"Thank you for completing the test!"}),e.jsx("h1",{className:"mt-4 text-lg font-medium text-green-700",children:"Your task is under verification. You will be redirected to the home page shortly."})]})})},"submit")]})})]})},pe=({isDurationComplete:o,tasks:i,setTasks:d,UUID:c,name:r,refreshPage:u,activeTaskIndex:a,setActiveTaskIndex:h,IsPaymentUnderProcess:f,IsPaid:w,IsCertified:m})=>{const[g,v]=l.useState(null),[T,N]=l.useState(!1),[P,S]=l.useState(!0);l.useEffect(()=>{const t=D(-1);h(t),m||E()},[i]);const E=async()=>{const t=j();console.log("IsCertified",m),console.log("VerifyIsCert",t),console.log("UUID",c),t&&await _(`update_iscertified/${c}`)},C=()=>{const t=[...i];t[a].IsComplete=!0,d(t);const n=D(a);h(n)},D=t=>{for(let n=t+1;n<i.length;n++)if(!i[n].IsComplete)return n;return i.length-1},j=()=>i.every(t=>t.IsComplete),k=t=>{S(t===!1?t:!P)},B=async t=>{const n=t.target.files[0];if(!n){console.error("No file selected.");return}if(!["application/zip","application/x-zip-compressed","application/octet-stream","application/pdf"].includes(n.type)){console.error("Invalid file type:",n.type),alert("Invalid file type. Please upload a ZIP, PDF");return}const p=10*1024*1024;if(n.size>p){console.error("File size exceeds 10 MB:",n.size),alert("File size exceeds 10 MB. Please upload a smaller file.");return}v(n),N(!0)},U=()=>{v(null);const t=document.getElementById("fileInput");t&&(t.value="")},F=async()=>{try{const t=i[a].RegistrationIDPK,n=i[a].UserID,b=g,p=i[a].TaskName,A=r,y=new FormData;y.append("file",b),y.append("RegistrationIDPK",t),y.append("UserID",n),y.append("fileName",b.name),y.append("TaskName",p),y.append("courseName",A);const $=await(await fetch(L.API_URL+"uploadTask/",{method:"POST",body:y})).json();$.code==200&&$.data.IsComplete&&(u(),C(),U(),N(!1))}catch(t){console.error("Error submitting task:",t)}},s=async()=>{try{const t=`${L.API_URL}certificate/${c}`,n=document.createElement("a");n.href=t,n.target="_blank",n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(t){console.error("Error fetching dropdown data:",t)}};return f==1&&w==0?e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"my-8 flex flex-col items-center justify-center text-center md:pl-8",children:[e.jsx("div",{className:"my-8 animate-bounce text-amber-600",children:e.jsx(J,{size:120})}),e.jsx("h1",{className:"mb-2 text-lg font-bold text-blue-700",children:"Thank you! Your payment is being verified."}),e.jsx("h2",{className:"text-md mb-2 font-semibold text-amber-600",children:"Once verification is complete, you will gain access to your course."}),e.jsx("p",{className:"text-sm text-gray-700",children:"Verification typically takes up to 24 hours. You will receive an email notification once your payment is confirmed."})]})}):e.jsx(x.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs("div",{className:"flex md:pl-8",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h2",{className:"mb-4 flex items-center text-xl font-bold text-gray-800",children:[e.jsx(W,{className:"mr-2 text-blue-600"})," Task Progress Timeline"]}),e.jsx("ol",{className:"relative border-s border-gray-200 text-gray-500",children:i&&i.map((t,n)=>e.jsxs(x.li,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5,delay:n*.2},className:`ms-6 mb-10 ${n===a?"active-task":""}`,children:[e.jsx("span",{className:`absolute -start-4 flex h-8 w-8 items-center justify-center rounded-full ring-4 ring-white ${t.IsComplete?"bg-green-200 ring-green-500":n===a?"bg-yellow-200 ring-yellow-500":"bg-gray-100 ring-gray-500"}`,children:t.IsComplete?e.jsx(Q,{className:"h-3.5 w-3.5 text-green-500"}):n===a?e.jsx(ie,{className:"h-3.5 w-3.5 text-yellow-500"}):e.jsx(oe,{className:"h-3.5 w-3.5 text-gray-500"})}),e.jsx("h3",{className:"text-sm leading-tight font-medium text-gray-800",children:t.TaskName}),e.jsx("p",{className:"text-xs text-gray-700",children:t.ShortDescription})]},t.TaskID))})]}),a!==null&&!j()&&i&&i[a]&&e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.5},className:"ml-4 flex-1 border-l-2 border-blue-700 bg-gray-50 pl-4",children:[e.jsxs("h2",{className:"mt-4 text-xl font-bold text-blue-700",children:[i[a].TaskName," ",e.jsxs("span",{className:"text-sm text-gray-600",children:["(",i[a].TaskCode,")"]})]}),e.jsx("h2",{className:"mb-4 text-xs text-gray-600",children:i[a].TaskType}),!j()&&(i[a].TaskType==="MCQ"?e.jsxs(e.Fragment,{children:[e.jsx(ge,{task:i[a],isOpenProp:P,onToggle:k}),e.jsx(fe,{RegistrationIDPK:i[a].RegistrationIDPK,TaskID:i[a].TaskID,handleTaskCompletion:C,handleToggle:k})]}):e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.7},className:"mt-4",children:[e.jsx("div",{className:"mb-2 max-h-[60vh] overflow-y-auto text-sm",dangerouslySetInnerHTML:{__html:i[a].Description}}),e.jsxs("label",{htmlFor:"fileInput",className:"flex cursor-pointer items-center space-x-2",children:[e.jsx(re,{}),e.jsx("span",{className:"text-sm text-blue-500",children:"Choose a file"})]}),e.jsx("input",{type:"file",id:"fileInput",className:"hidden",onChange:B}),g&&e.jsxs("div",{className:"mt-2 flex items-center space-x-2",children:[e.jsx("span",{className:"text-xs text-gray-500",children:g.name}),e.jsx("button",{type:"button",className:"text-xs text-red-500 hover:text-red-700 focus:outline-none",onClick:U,children:"Clear"})]}),T&&e.jsx("div",{className:"mt-4",children:e.jsx(R,{name:"Submit Task",icon:"check",color:"blue",onClick:F})})]}))]}),j()&&e.jsx("div",{className:"fml-4 flex w-1/2 pl-4 text-center",children:e.jsxs(x.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.7},className:"",children:[e.jsx("div",{className:"my-4 flex animate-pulse justify-center text-green-600",children:e.jsx(z,{size:200})}),e.jsx("h2",{className:"my-4 text-xl font-bold text-green-700",children:"Congratulations!"}),e.jsxs("h2",{className:"mb-4 text-xl font-bold text-blue-700",children:["Certificate for ",r]}),e.jsxs("p",{className:"mb-8 px-8 text-gray-800",children:["You have successfully completed all tasks in the ",r," Course. Download your certificate now to showcase your skills and achievements."]}),o?e.jsx(R,{className:"mx-auto",name:"Download Certificate",icon:"file_download",color:"blue",onClick:s}):e.jsx("h1",{className:"text-md font-bold text-green-700",children:"Thank you! Please wait while your certificate is being created. It will be emailed to you shortly after the course duration is complete, or you can download it from here later."})]})})]})})},ge=({task:o,isOpenProp:i,onToggle:d})=>{const[c,r]=l.useState(i),u=()=>{r(!c),d&&d(!c)};return l.useEffect(()=>{r(i)},[i]),e.jsxs("div",{className:"accordion-item",children:[e.jsxs("button",{onClick:u,className:"accordion-header mb-4 flex w-full items-center justify-between border-b-2 border-blue-500",children:[e.jsxs("span",{children:["Task Details: Click to ",c?"Close":"Expand"]}),c?e.jsx(Z,{}):e.jsx(X,{})]}),e.jsx(x.div,{initial:!1,animate:c?"open":"closed",variants:{open:{height:"auto",opacity:1},closed:{height:0,opacity:0}},transition:{duration:.5},className:"overflow-hidden",children:e.jsx("div",{className:"p-4 text-sm",dangerouslySetInnerHTML:{__html:o.Description}})})]})},De=()=>{const[o,i]=l.useState(!1),d=JSON.parse(localStorage.getItem("udt")),[c,r]=l.useState(0),u=localStorage.getItem("uid"),[a,h]=l.useState([]),[f,w]=l.useState([]),[m,g]=l.useState([]),[v,T]=l.useState([]),[N,P]=l.useState(null),[S,E]=l.useState(!0),C=H(),D=localStorage.getItem("usid"),j=async()=>{try{i(!0);const[s,t,n]=await Promise.all([_(`coursedetails/${u}`),_(`newcourse/${u}`),_(`homehero/${u}`)]);if(s.code===200&&s.data.length>0){const b=s.data.map(p=>{const A=p.tasks.sort((y,O)=>y.TaskOrderNo-O.TaskOrderNo);return{...p,tasks:A}});h(b)}else h([]);t.code===200&&t.data.length>0?w(t.data):w([]),n.code===200&&n.data.length>0?g(n.data):g([])}catch(s){console.error("Error fetching dropdown data:",s)}finally{i(!1)}},k=()=>{const s=localStorage.getItem("loginTime"),t=new Date().getTime(),n=1440*60*1e3;s&&t-s>n&&(localStorage.clear(),se.warning("Session expired. Please login again.",{position:"top-right",autoClose:2e3}),C("/login"))};l.useEffect(()=>{k();const s=localStorage.getItem("uid");(!s||s===0||s===""||s===void 0)&&(localStorage.clear(),C("/login"))},[C]),l.useEffect(()=>{j()},[]),l.useEffect(()=>{const s=setTimeout(()=>{E(!1)},4e3);return()=>clearTimeout(s)},[]);const B=async s=>{try{window.confirm("Do you want to enroll in this Course? You will be redirecting to Payment Page...")&&(i(!0),U(s))}catch(t){console.error("Error fetching dropdown data:",t)}finally{j(),i(!1)}},U=async s=>{console.log("courses[currentCourseIndex]",f,{e:s},D);try{const t=`${L.API_URL}enroll/${s}/${D}`,n=document.createElement("a");n.href=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(t){console.error("Error fetching dropdown data:",t)}};function F(s,t){const n=new Date(s),b=new Date,p=t*60*60*1e3;return b-n>=p}return e.jsxs(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"flex h-full flex-col",children:[o&&e.jsx(M,{}),e.jsx(xe,{user:d}),e.jsxs(x.main,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"custom-scroll flex-grow overflow-y-auto rounded",children:[S&&e.jsxs("h1",{id:"intern_name",className:"p-2 text-lg font-bold text-gray-800",children:["Welcome, ",d&&d.username,"!"]}),e.jsx(x.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},className:"flex min-h-full flex-col gap-2 bg-white p-2 md:flex-row",children:e.jsxs("div",{className:"flex min-h-96 w-full flex-col gap-2 bg-white p-1 md:flex-row",children:[a&&a.length>0?e.jsx("div",{className:"w-full md:w-1/3",children:e.jsxs("div",{className:"custom-scroll mb-4 h-full max-h-screen overflow-y-auto rounded bg-gray-50 p-3",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between border-b-2 border-blue-700 pb-2 text-xl font-bold text-blue-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ee,{className:"mr-2"})," Your Enrolled Courses"]}),e.jsx(te,{title:"Home",className:"cursor-pointer hover:text-blue-400",onClick:()=>window.location.reload()})]}),a.map((s,t)=>e.jsx(de,{course:s,isSelected:c===t,IsPaymentUnderProcess:s.IsPaymentUnderProcess,IsPaid:s.IsPaid,IsCertified:s.IsCertified,isDurationComplete:F(s.created_datetime,s.CourseCode),onClick:()=>{r(t),T(s.tasks)}},s.id))]})}):null,e.jsx("div",{className:"w-full md:w-full",children:v&&v.length>0?e.jsx(pe,{tasksData:v,tasks:v,setTasks:T,isDurationComplete:F(a[c].created_datetime,a[c].CourseCode),courseStatus:a[c].Status,name:a[c].CourseName,IsPaymentUnderProcess:a[c].IsPaymentUnderProcess,IsPaid:a[c].IsPaid,IsCertified:a[c].IsCertified,UUID:a[c].UUID,refreshPage:j,activeTaskIndex:N,setActiveTaskIndex:P}):e.jsx(he,{homehero:m,newcourses:f,enrollNewCourse:B})})]})})]})]})};export{De as default};

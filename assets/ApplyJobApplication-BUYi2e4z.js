import{j as e}from"./index-Bw-tYXn7.js";import{c as w}from"./config-BbshSSl6.js";import{G as b}from"./GetAPI-C0R9K2iB.js";import{i as v,h as N,r}from"./react-vendor-C96nFidc.js";import{k as _,F as k,l as C,a as D,b as E,c as S,d as $,e as A}from"./index-D2Il0tAB.js";import{y as i}from"./ui-vendor-CrwEJxT6.js";import"./icons-vendor-D-G97rvP.js";const O=()=>{const{uuid:s,applied_from:d}=v(),c=N(),[t,h]=r.useState({}),[l,p]=r.useState(""),[m,u]=r.useState(!1);r.useEffect(()=>{(async()=>{const o=await b(`rts/apply/job/job_applications/${s}/get_jd_Job_uuid`);h(o.data.job)})()},[s]);const f=a=>{p(a.target.value)},j=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),g=async()=>{if(!j(l)){i.error("Please enter a valid email address.");return}const a=JSON.parse(localStorage.getItem("appliedData"))||{},o=a[`${s}_${l}`],x=new Date().getTime();if(o&&x-o<36e5){i.error("You have already applied for this position. Please check your email and try again later.");return}try{u(!0);const y=await b(`rts/jobs/share/${t.job_id}/${l}`);i.success("Please check your email. We have sent you further details to proceed."),localStorage.setItem("appliedData",JSON.stringify({...a,[`${s}_${l}`]:x}))}catch{i.error("Something went wrong. Please try again.")}finally{c("/"),p(""),u(!1)}};return e.jsxs("div",{className:"max-w-3xl mx-auto p-8 bg-white shadow-md rounded-md",children:[e.jsx("a",{href:"/",children:e.jsx("img",{src:`${w.IMAGE_URL}branding/logo1.png`,alt:"Company Logo",className:"w-36 h-auto mb-4 transition-opacity duration-700 ease-out hover:opacity-75"})}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:t.job_title}),e.jsx(F,{job:t}),t.job_status!="Open"?e.jsxs("div",{className:"flex items-center bg-red-100 text-red-700 p-4 my-6 rounded-md",children:[e.jsx(_,{className:"mr-2 text-red-600",size:24}),e.jsx("span",{className:"font-medium",children:"Currently, this job is closed. Please check back later for new openings."})]}):e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-4",children:[e.jsx(k,{className:"mr-2 text-blue-500 hidden md:block text-justify"}),e.jsx("p",{children:"Please ensure that you are eligible for this position. Then, enter your email below and click 'Apply' to agree."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-6",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",value:l,onChange:f,className:"bg-white w-full sm:w-auto flex-1 p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400"}),e.jsx("button",{onClick:g,disabled:m,className:`w-full sm:w-auto bg-blue-600 text-white p-3 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center ${m?"opacity-50 cursor-not-allowed":""}`,children:m?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"animate-spin mr-2"}),"Applying..."]}):"Apply"})]}),e.jsx("p",{className:"mt-4 mb-2 text-lg font-semibold",children:"Job Description:"}),e.jsx("div",{className:"mb-6 text-gray-800",dangerouslySetInnerHTML:{__html:t.job_description}})]})]})},F=({job:s})=>e.jsxs("div",{className:"flex flex-col md:flex-row mb-2 gap-2",children:[e.jsx(n,{label:"Experience Required",value:`${s.experience_required} years`,icon:e.jsx(D,{})}),e.jsx(n,{label:"Location",value:s.location,icon:e.jsx(E,{})}),e.jsx(n,{label:"Employment Type",value:s.employment_type,icon:e.jsx(S,{})}),e.jsx(n,{label:"Job Status",value:s.job_status,icon:s.job_status==="Closed"?e.jsx($,{}):e.jsx(A,{})})]}),n=({label:s,value:d,icon:c})=>e.jsxs("div",{title:s,className:"flex items-center p-2 rounded-md bg-gray-100 shadow-sm",children:[e.jsx("span",{className:"mr-3 text-blue-600",children:c}),e.jsx("span",{className:"text-blue-900 font-medium",children:d})]});export{O as default};

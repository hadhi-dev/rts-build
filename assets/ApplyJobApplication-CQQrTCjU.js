import{j as e}from"./index-BRtCjCOM.js";import{c as w}from"./config-BbshSSl6.js";import{G as j}from"./GetAPI-C0R9K2iB.js";import{i as _,h as k,r as n}from"./react-vendor-C96nFidc.js";import{f as S,x as A,y as $,e as C,h as E,t as F,s as g,n as D}from"./index-Dhm8vqgr.js";import{y as c}from"./ui-vendor-CrwEJxT6.js";import{m as p}from"./proxy-Dfj6t8uf.js";import"./icons-vendor-D-G97rvP.js";const z=()=>{const{uuid:t}=_(),x=k(),[s,m]=n.useState({}),[i,f]=n.useState(""),[o,h]=n.useState(!1);n.useEffect(()=>{(async()=>{try{const r=await j(`rts/apply/job/job_applications/${t}/get_jd_Job_uuid`);m(r.data.job)}catch(r){console.error("Failed to fetch job",r)}})()},[t]);const y=l=>f(l.target.value),N=l=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l),v=async l=>{if(l.preventDefault(),!N(i)){c.error("Please enter a valid email address.");return}const r=JSON.parse(localStorage.getItem("appliedData"))||{},b=r[`${t}_${i}`],u=new Date().getTime();if(b&&u-b<36e5){c.error("You have already applied for this position recently.");return}try{h(!0),await j(`rts/jobs/share/${s.job_id}/${i}`),c.success("Check your email to proceed with the application."),localStorage.setItem("appliedData",JSON.stringify({...r,[`${t}_${i}`]:u})),x("/")}catch{c.error("Something went wrong. Please try again.")}finally{h(!1)}},a=s.job_status==="Open";return e.jsxs("div",{className:"min-h-screen bg-slate-50 font-sans text-slate-800",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-slate-200",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between",children:[e.jsx("a",{href:"/",className:"flex items-center gap-2",children:e.jsx("img",{src:`${w.IMAGE_URL}branding/logo1.png`,alt:"RTS Logo",className:"h-8 w-auto"})}),e.jsxs("div",{className:"text-xs font-mono text-slate-400 bg-slate-100 px-2 py-1 rounded",children:["REF: ",t==null?void 0:t.slice(0,8).toUpperCase()]})]})}),e.jsx("div",{className:"bg-white border-b border-slate-200 pb-8 pt-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide border ${a?"bg-emerald-50 text-emerald-700 border-emerald-200":"bg-red-50 text-red-700 border-red-200"}`,children:a?"Hiring Now":"Closed"}),e.jsxs("span",{className:"text-slate-400 text-sm flex items-center gap-1",children:[e.jsx(S,{className:"text-xs"})," Tech Department"]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-slate-900 tracking-tight",children:s.job_title||"Loading Position..."})]}),e.jsx("div",{className:"hidden md:block",children:a&&e.jsxs("button",{onClick:()=>document.getElementById("apply-form").scrollIntoView({behavior:"smooth"}),className:"text-emerald-600 font-semibold hover:text-emerald-700 text-sm flex items-center gap-2",children:["Jump to Application ",e.jsx(A,{size:12})]})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4 border-t border-slate-100 pt-6",children:[e.jsx(d,{icon:e.jsx($,{}),label:"Experience",value:s.experience_required?`${s.experience_required}+ Years`:"N/A"}),e.jsx(d,{icon:e.jsx(C,{}),label:"Location",value:s.location}),e.jsx(d,{icon:e.jsx(E,{}),label:"Job Type",value:s.employment_type}),e.jsx(d,{icon:a?e.jsx(F,{}):e.jsx(g,{}),label:"Status",value:s.job_status,color:a?"text-emerald-600":"text-red-600"})]})]})})}),e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-10",children:[e.jsx(p.div,{className:"flex-1 min-w-0",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:e.jsxs("div",{className:"prose prose-slate prose-emerald max-w-none prose-headings:font-bold prose-a:text-emerald-600 hover:prose-a:text-emerald-500",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4 pb-2 border-b border-slate-200",children:"About the Role"}),s.job_description?e.jsx("div",{dangerouslySetInnerHTML:{__html:s.job_description}}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-full animate-pulse"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6 animate-pulse"})]})]})}),e.jsx(p.div,{className:"w-full lg:w-[400px] flex-shrink-0",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.3},children:e.jsxs("div",{className:"sticky top-24",children:[e.jsxs("div",{id:"apply-form",className:"bg-white rounded-2xl shadow-xl border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-slate-900 p-6 text-white",children:[e.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",children:["Quick Apply",e.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"})]}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:"Start your journey with us today."})]}),e.jsx("div",{className:"p-6",children:a?e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"you@company.com",value:i,onChange:y,disabled:o,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:bg-white transition-all text-slate-800 placeholder-slate-400"})]}),e.jsx("button",{type:"submit",disabled:o,className:`w-full py-3.5 px-4 rounded-xl font-bold text-white shadow-lg shadow-emerald-200 transition-all flex items-center justify-center gap-2 ${o?"bg-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-700 hover:-translate-y-0.5"}`,children:o?e.jsx(D,{className:"animate-spin"}):"Continue Application"}),e.jsx("p",{className:"text-xs text-center text-slate-400 mt-4 leading-relaxed",children:"By applying, you agree to our Terms & Recruitment Policy. We'll send a secure link to your email."})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-red-50 text-red-500 rounded-full flex items-center justify-center mb-3",children:e.jsx(g,{size:24})}),e.jsx("h4",{className:"font-bold text-slate-800",children:"Position Filled"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"We are no longer accepting applications for this role."})]})})]}),e.jsxs("div",{className:"mt-6 text-center",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Having trouble applying?"}),e.jsx("a",{href:"mailto:support@rts.com",className:"text-xs font-semibold text-emerald-600 hover:underline",children:"Contact Support"})]})]})})]})})]})},d=({icon:t,label:x,value:s,color:m="text-slate-800"})=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 transition-colors",children:[e.jsx("div",{className:"text-slate-400 text-lg",children:t}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider mb-0.5",children:x}),e.jsx("p",{className:`text-sm font-bold ${m} truncate`,children:s||"-"})]})]});export{z as default};

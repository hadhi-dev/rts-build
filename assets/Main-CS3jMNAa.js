import{j as e,L as ae}from"./index-CZKKA0SR.js";import{c as re}from"./config-BbshSSl6.js";import{M as ie,S as oe,J as le,i as Y,f as ne,t as de,c as ce}from"./JobStatusScreen-C6zJdxPA.js";import{G as U}from"./GetAPI-C0R9K2iB.js";import{P as me}from"./PostAPI-Dm7qi3aC.js";import{g as xe,e as ee,r as y}from"./react-vendor-DWPARcIf.js";import{y as C}from"./ui-vendor-TdGwSbkz.js";import{C as ge,I as M,R as te,T as pe}from"./TableView-DqGTd61e.js";import{B as ue,a as he,b as be,c as fe,d as se}from"./Interviews-CtiPIYK3.js";import{D as z,E as Z,G as ye,H as je,I as Ne,y as ve,b as we,c as Ce,J as ke,K as _e,p as Se,f as Fe,d as Ie,e as Te}from"./index-DucPhvMM.js";import{m as k}from"./proxy-Bb6FitNF.js";import{B as $e}from"./ButtonMini-B2ysNCq4.js";import{C as Pe}from"./chevron-down-CFDt_xpA.js";import"./react-lifecycles-compat.es-Bz2kNPGS.js";import"./rtsApi-Dl_EsLra.js";import"./moment-BndZFSQF.js";import"./icons-vendor-iI49wpkt.js";import"./useEventCallback-CUkFVhUS.js";import"./chart-vendor-DMhujEC7.js";import"./memoize-one.esm-DQq2xVVF.js";import"./react-select.esm-BGwzlP6T.js";import"./inheritsLoose-MEHl_3-6.js";import"./createLucideIcon-DTte54Zk.js";import"./Sidebar-CLAYmXk_.js";const De=({handleSubmit:w,clearForm:f,primID:i,formConfig:o,formData:c,handleChange:m,onBack:h,title:j})=>{const g=o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&["job_title","job_order","client_id","recruiter_id"].includes(t.fieldName)),l=o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&["employment_type","salary_range","education_level","number_of_positions","experience_required"].includes(t.fieldName)),a=o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&["job_priority","job_status","location","certifications"].includes(t.fieldName)),b=o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&["required_skills"].includes(t.fieldName)),u=o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&["job_description"].includes(t.fieldName)),x=o.filter(t=>t.type==="checkbox"&&t.IsVisible);return e.jsxs("form",{onSubmit:w,className:"w-full bg-gray-50 min-h-screen",children:[e.jsx(k.div,{className:"bg-white sticky top-0 z-40 shadow-sm border-b border-gray-200",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{type:"button",className:"p-2.5 rounded-lg hover:bg-gray-100 transition-all text-gray-600 hover:text-indigo-600",onClick:()=>h("table"),title:"Go back",children:e.jsx(ue,{className:"text-xl"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[i?"Edit":"Create New"," ",j]}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:i?"Update the job posting details":"Add a new job posting to your list"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[i?e.jsxs("button",{type:"button",onClick:()=>h("table"),className:"px-4 py-2.5 rounded-lg border-2 border-gray-200 text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-300 transition-all flex items-center gap-2",children:[e.jsx(z,{className:"text-lg"}),"Close"]}):e.jsxs("button",{type:"button",onClick:f,className:"px-4 py-2.5 rounded-lg border-2 border-gray-200 text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-300 transition-all flex items-center gap-2",children:[e.jsx(z,{className:"text-lg"}),"Clear"]}),e.jsxs("button",{type:"submit",className:"px-4 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(Z,{className:"text-lg"}),i>0?"Update":"Save"]})]})]})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-4 md:p-6 space-y-4 pb-32",children:[x.length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-indigo-600 rounded"}),"Options"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:x.map(t=>e.jsx(ge,{field:t,formData:c,handleChange:m},t.fieldName))})]}),g.length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.15},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-indigo-600 rounded"}),"Basic Information"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full",children:g.map(t=>e.jsx("div",{className:"w-full min-w-0",children:e.jsx(M,{field:t,formData:c,handleChange:m})},`wrapper-${t.fieldName}`))})]}),l.length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-purple-600 rounded"}),"Employment Details"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 w-full",children:l.map(t=>e.jsx("div",{className:"w-full min-w-0",children:e.jsx(M,{field:t,formData:c,handleChange:m})},`wrapper-${t.fieldName}`))})]}),a.length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.25},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-orange-500 rounded"}),"Job Details"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 w-full",children:a.map(t=>e.jsx("div",{className:"w-full min-w-0",children:e.jsx(M,{field:t,formData:c,handleChange:m})},`wrapper-${t.fieldName}`))})]}),b.length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-teal-600 rounded"}),"Required Skills"]}),e.jsx("div",{className:"space-y-4",children:b.map(t=>e.jsx(M,{field:t,formData:c,handleChange:m},t.fieldName))})]}),u.length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.35},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-green-600 rounded"}),"Job Description"]}),e.jsx("div",{className:"space-y-4",children:u.map(t=>e.jsx(M,{field:t,formData:c,handleChange:m},t.fieldName))})]}),o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&!g.some(n=>n.fieldName===t.fieldName)&&!l.some(n=>n.fieldName===t.fieldName)&&!a.some(n=>n.fieldName===t.fieldName)&&!b.some(n=>n.fieldName===t.fieldName)&&!u.some(n=>n.fieldName===t.fieldName)).length>0&&e.jsxs(k.div,{className:"bg-white p-4 md:p-5 rounded-xl shadow-sm border border-gray-100",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[e.jsxs("h3",{className:"text-xs font-bold text-gray-900 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-4 bg-blue-600 rounded"}),"Additional Information"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:o.filter(t=>t.type!=="checkbox"&&t.IsVisible&&!g.some(n=>n.fieldName===t.fieldName)&&!l.some(n=>n.fieldName===t.fieldName)&&!a.some(n=>n.fieldName===t.fieldName)&&!b.some(n=>n.fieldName===t.fieldName)&&!u.some(n=>n.fieldName===t.fieldName)).map(t=>e.jsx(M,{field:t,formData:c,handleChange:m},t.fieldName))})]})]}),e.jsxs(k.div,{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 space-x-2 flex justify-end gap-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[i?e.jsxs("button",{type:"button",onClick:()=>h("table"),className:"px-4 py-2.5 rounded-lg border-2 border-gray-200 text-gray-700 font-semibold hover:bg-gray-50 transition-all flex items-center gap-2",children:[e.jsx(z,{className:"text-lg"}),"Close"]}):e.jsxs("button",{type:"button",onClick:f,className:"px-4 py-2.5 rounded-lg border-2 border-gray-200 text-gray-700 font-semibold hover:bg-gray-50 transition-all flex items-center gap-2",children:[e.jsx(z,{className:"text-lg"}),"Clear"]}),e.jsxs("button",{type:"submit",className:"px-4 py-2.5 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-semibold hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx(Z,{className:"text-lg"}),i>0?"Update":"Save"]})]})]})},Re=({handleAdd:w,title:f,refresh:i,TotalCount:o,filterContent:c})=>e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3 w-full bg-white rounded-lg shadow-sm border border-gray-100 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-1.5 h-10 bg-gradient-to-b from-indigo-600 to-purple-600 rounded-full"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:f}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Total: ",e.jsx("span",{className:"text-indigo-600 font-semibold",children:o??0})," jobs"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{title:"Refresh Data",onClick:i,className:"p-2.5 hover:bg-indigo-50 rounded-lg transition-all duration-200 text-gray-600 hover:text-indigo-600 border border-gray-200 hover:border-indigo-300",children:e.jsx(he,{className:"text-base"})}),e.jsx($e,{name:"Create New Job",onClick:w,color:"indigo",icon:"add",className:"shadow-sm hover:shadow-md transition-all duration-300"})]})]}),c&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-3",children:c})]}),Ve=()=>e.jsxs(k.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.5},className:"flex flex-col items-center justify-center h-96 text-center",children:[e.jsx(ye,{className:"text-5xl mb-2 text-yellow-500"}),e.jsx("h5",{className:"text-lg text-gray-600",children:"No Records Found"})]}),Me=({handleSearchChange:w,searchInput:f,toggleView:i,isCardView:o,handleItemsPerPageChange:c,itemsPerPage:m,pageCount:h,onPageChange:j,setCurrentPage:g,setDateRange:l,startDate:a,endDate:b,count:u})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{className:"flex w-full items-center space-x-2",children:[e.jsxs("form",{className:"flex w-1/3 items-center",children:[e.jsx("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("svg",{"aria-hidden":"true",className:"h-5 w-5 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{placeholder:"Search ...",type:"text",id:"simple-search",className:"focus:ring-primary-500 focus:border-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900",onChange:w,value:f})]})]}),e.jsx("button",{onClick:i,title:o?"Table View":"Card View",className:"ml-1 flex items-center justify-center rounded-full border border-indigo-600 px-2 py-2 text-indigo-600 hover:border-indigo-700 hover:text-indigo-700 focus:outline-none",children:e.jsx("i",{className:"material-icons text-sm md:text-lg",children:o?"view_list":"view_module"})}),e.jsxs("div",{className:"relative inline-block",children:[e.jsx("select",{title:"Rows Per Page",id:"itemsPerPage",className:"appearance-none rounded-full border border-indigo-600 bg-white px-4 py-2 pr-8 text-indigo-600 hover:border-indigo-700 hover:text-indigo-700 focus:outline-none",onChange:c,value:m,children:[10,20,50,100].map(x=>e.jsx("option",{value:x,children:x},x))}),e.jsx(Pe,{size:18,className:"pointer-events-none absolute top-1/2 right-3 -translate-y-1/2 text-indigo-600"})]}),l&&e.jsxs("div",{className:"relative z-10 hidden items-center space-x-4 md:flex",children:[e.jsx(be,{id:"date-range-picker",selectsRange:!0,startDate:a,endDate:b,onChange:x=>{l(x),g(0)},isClearable:!0,placeholderText:"Select date range",className:"focus:ring-primary-500 focus:border-primary-500 block w-full rounded-lg border border-gray-300 bg-gray-50 p-2 pl-10 text-sm text-gray-900"}),e.jsx("span",{className:"text-xs text-gray-700",children:u?`(${u} Inters)`:""})]})]}),j&&e.jsx("div",{className:"hidden items-center md:flex",children:e.jsx(te,{previousLabel:e.jsx(Ne,{size:18,className:"text-indigo-600"}),nextLabel:e.jsx(je,{size:18,className:"text-indigo-600"}),breakLabel:"...",pageCount:h,marginPagesDisplayed:1,pageRangeDisplayed:2,onPageChange:j,containerClassName:"flex items-center space-x-1",pageClassName:"px-0",pageLinkClassName:"px-2 py-1 rounded-lg hover:bg-indigo-50 hover:text-indigo-600 block",activeClassName:"bg-indigo-700 text-white rounded-lg",previousClassName:"px-1 py-1 rounded-lg hover:bg-indigo-50 hover:text-indigo-600",nextClassName:"px-1 py-1 rounded-lg hover:bg-indigo-50 hover:text-indigo-600",disabledClassName:"opacity-50 cursor-not-allowed",breakClassName:"px-2 py-1 text-gray-500"})})]});var G={exports:{}},Ee=G.exports,K;function Ae(){return K||(K=1,(function(w,f){(function(i,o){w.exports=o()})(Ee,(function(){return function(i,o,c){i=i||{};var m=o.prototype,h={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function j(l,a,b,u){return m.fromToBase(l,a,b,u)}c.en.relativeTime=h,m.fromToBase=function(l,a,b,u,x){for(var t,n,_,v=b.$locale().relativeTime||h,P=i.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],D=P.length,S=0;S<D;S+=1){var N=P[S];N.d&&(t=u?c(l).diff(b,N.d,!0):b.diff(l,N.d,!0));var F=(i.rounding||Math.round)(Math.abs(t));if(_=t>0,F<=N.r||!N.r){F<=1&&S>0&&(N=P[S-1]);var $=v[N.l];x&&(F=x(""+F)),n=typeof $=="string"?$.replace("%d",F):$(F,a,N.l,_);break}}if(a)return n;var R=_?v.future:v.past;return typeof R=="function"?R(n):R.replace("%s",n)},m.to=function(l,a){return j(l,a,this,!0)},m.from=function(l,a){return j(l,a,this)};var g=function(l){return l.$u?c.utc():c()};m.toNow=function(l){return this.to(g(this),l)},m.fromNow=function(l){return this.from(g(this),l)}}}))})(G)),G.exports}var Je=Ae();const Le=xe(Je);se.extend(Le);const Be={hidden:{opacity:0},visible:{opacity:1,transition:{delayChildren:.1,staggerChildren:.08}}},Oe={hidden:{opacity:0,y:8},visible:{opacity:1,y:0,transition:{duration:.3}}},qe=({data:w,handleEdit:f,handleView:i,IDPK:o,actionsBtn:c=[]})=>{const m=localStorage.getItem("rts_user_type"),h=ee(),j=a=>{switch(a){case"Open":return{bg:"bg-green-50",border:"border-green-200",badge:"bg-green-100 text-green-700"};case"Closed":return{bg:"bg-red-50",border:"border-red-200",badge:"bg-red-100 text-red-700"};default:return{bg:"bg-yellow-50",border:"border-yellow-200",badge:"bg-yellow-100 text-yellow-700"}}},g=a=>{switch(a){case"Open":return e.jsx(Te,{className:"text-green-600"});case"Closed":return e.jsx(Ie,{className:"text-red-600"});default:return e.jsx(Fe,{className:"text-yellow-600"})}},l=a=>{switch(a==null?void 0:a.toLowerCase()){case"high":return"bg-red-100 text-red-700 border-red-300";case"medium":return"bg-orange-100 text-orange-700 border-orange-300";case"low":return"bg-blue-100 text-blue-700 border-blue-300";default:return"bg-gray-100 text-gray-700"}};return e.jsx(k.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 w-full py-2 px-2 max-h-none overflow-auto custom-scroll",variants:Be,initial:"hidden",animate:"visible",children:w.map((a,b)=>{const u=j(a.job_status);return e.jsxs(k.div,{onDoubleClick:()=>h(`/rts/jobs/${a.uuid}`),className:`group relative overflow-hidden rounded-xl border-2 ${u.border} ${u.bg} bg-white shadow-sm hover:shadow-lg hover:scale-102 transition-all duration-300 cursor-pointer p-3.5`,variants:Oe,children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-indigo-100 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-full -mr-10 -mt-10"}),e.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-semibold backdrop-blur-sm",style:{backgroundColor:u.badge.split(" ")[0],color:u.badge.split(" ")[1]},children:[g(a.job_status),a.job_status]}),e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 text-xs font-bold rounded-full border ${l(a.job_priority)}`,children:[e.jsx(ie,{className:"text-sm"}),a.job_priority]})}),e.jsxs("div",{className:"pt-6 relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2.5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 group-hover:text-indigo-600 transition-colors truncate",children:a.job_title}),m==="Recruiter"&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 truncate",children:a.client_name})]}),e.jsx("button",{onClick:()=>f(a[o]),className:"p-2 rounded-lg text-indigo-600 bg-indigo-50 hover:bg-indigo-100 transition-colors flex-shrink-0",title:"Edit Job",children:e.jsx(fe,{className:"text-lg"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-white rounded-lg border border-gray-200",children:[e.jsx(ve,{className:"text-indigo-600 text-sm flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 truncate",children:a.employment_type})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-white rounded-lg border border-gray-200",children:[e.jsx(we,{className:"text-orange-500 text-sm flex-shrink-0"}),e.jsx("span",{className:"text-xs font-medium text-gray-700 truncate",children:a.location})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-white rounded-lg border border-gray-200",children:[e.jsx(Ce,{className:"text-purple-600 text-sm flex-shrink-0"}),e.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[a.experience_required," yrs"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-2.5 py-1.5 bg-white rounded-lg border border-gray-200",children:[e.jsx(ke,{className:"text-teal-600 text-sm flex-shrink-0"}),e.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[a.applicantsCount," Apps"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 pt-3 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-400 flex items-center gap-1 flex-shrink-0",children:[e.jsx(_e,{className:"text-xs"}),"Posted ",se(a.created_at).fromNow()]}),e.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[c.length>0&&c.slice(0,2).map((x,t)=>e.jsx("button",{title:x.title,onClick:()=>x.functionNeed(a[o],a),className:"p-2 rounded-lg transition-all duration-200 hover:scale-110 flex items-center justify-center",style:{backgroundColor:`rgb(from ${x.color==="indigo"?"#4f46e5":x.color==="orange"?"#f97316":"#3b82f6"} r g b / 0.15)`,color:x.color==="indigo"?"#4f46e5":x.color==="orange"?"#f97316":"#3b82f6"},children:e.jsx("i",{className:"material-icons text-base",children:x.icon})},t)),e.jsx("button",{onClick:()=>h(`/rts/jobs/${a.uuid}`),className:"p-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg text-xs font-semibold hover:shadow-md hover:scale-110 transition-all duration-200 flex items-center justify-center",children:e.jsx(Se,{className:"text-base"})})]})]})]})]},b)})})},ze=({tableFields:w,cardViewFields:f,dataList:i,handleEdit:o,handleView:c,title:m,isCardView:h,setCardView:j,IDPK:g})=>{const l=ee(),[a,b]=y.useState(""),[u,x]=y.useState(0),[t,n]=y.useState(10),[_,v]=y.useState(!1),[P,D]=y.useState(null),S=p=>{const s=i.find(r=>r[g]===p);s&&s.uuid?l(`/rts/jobs/${s.uuid}`):C.error("Unable to open job details")},N=(p,s)=>{s(p.target.value),x(0)},F=()=>{j(!h),x(0)},$=({selected:p})=>{x(p)},R=p=>{N(p,n)},V=i.filter(p=>Object.values(p).join(" ").toLowerCase().includes(a.toLowerCase())),B=V.slice(u*t,(u+1)*t),O=Math.ceil(V.length/t),H=p=>{D(p),v(!0)},E=()=>{v(!1)},q=async(p,s)=>{v(!1),C.success("Job Description Shared to "+s);const r=await U(`rts/jobs/share/${p}/${s}`);C.success(r.message)},A=[{icon:"share",color:"indigo",title:"Share",functionNeed:H},{icon:"link",color:"orange",title:"Copy",functionNeed:p=>{const s=i.find(d=>d.job_id==p),r=`${globalThis.location.origin}/rts/apply/job_application/${s.uuid}`;navigator.clipboard.writeText(r).then(()=>{C.success("Job application link copied to clipboard!")}).catch(d=>{console.error("Failed to copy: ",d),C.error("Failed to copy link. Please try again.")})}}];return(i==null?void 0:i.length)===0?e.jsx(Ve,{}):e.jsxs("div",{className:"py-2 space-y-2",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:e.jsx(Me,{handleSearchChange:p=>N(p,b),searchInput:a,toggleView:F,isCardView:h,handleItemsPerPageChange:R,itemsPerPage:t,pageCount:O,onPageChange:$})}),e.jsx("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:h?e.jsx(qe,{data:B,cardViewFields:f,handleEdit:o,handleView:S,title:m,IDPK:g,actionsBtn:A}):e.jsx(pe,{tableFields:w,dataList:B,handleEdit:o,handleView:S,IDPK:g,actionsBtn:A})}),e.jsxs("div",{className:"relative md:hidden",children:[e.jsx("div",{className:"mb-16"}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex items-center justify-center space-x-2 p-3",children:e.jsx(te,{pageCount:O,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:$,containerClassName:"pagination flex space-x-1",activeClassName:"active",breakClassName:"break-me",breakLinkClassName:"break-link",pageClassName:"page",pageLinkClassName:"page-link px-3 py-2 rounded-lg text-sm font-medium",previousClassName:"previous",previousLinkClassName:"previous-link px-3 py-2 rounded-lg text-sm font-medium",nextClassName:"next",nextLinkClassName:"next-link px-3 py-2 rounded-lg text-sm font-medium",disabledClassName:"disabled opacity-50 cursor-not-allowed",onDoubleClick:p=>p.preventDefault()})})]}),e.jsx(oe,{open:_,onClose:E,onShare:q,currentItemId:P})]})},Ue=({formConfig:w,formData:f,primID:i,onBack:o,handleEdit:c,handleAdd:m,title:h})=>e.jsx("div",{className:"w-full",children:e.jsx("div",{className:"bg-white w-full rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:e.jsx(le,{primID:i,onBack:o,formConfig:w,formData:f})})}),Q="Job Postings",W="job_id",Ge="rts/jobs_save",He="rts/jobs",ft=w=>{const[f,i]=y.useState(Y),[o,c]=y.useState(ne),[m,h]=y.useState([]),[j,g]=y.useState("table"),[l,a]=y.useState(0),[b,u]=y.useState(!0),[x,t]=y.useState(""),[n,_]=y.useState(!0),v=localStorage.getItem("rts_user_type"),P=localStorage.getItem("rts_user_uuid"),[D,S]=y.useState([]),[N,F]=y.useState(null);y.useEffect(()=>{v==="Recruiter"&&(async()=>{try{const[r,d]=await Promise.all([U("rts/select/clients"),U("rts/select/recruiters")]);if(r.code===200||d.code===200){const T=r.code===200&&r.data.length>0?r.data:[],I=d.code===200&&d.data.length>0?d.data:[],J=o.map(L=>L.fieldID==="client_id"?{...L,options:T}:L.fieldID==="recruiter_id"?{...L,options:I}:L);c(J)}}catch(r){console.error("Error fetching dropdown data:",r)}})()},[]),y.useEffect(()=>{if(v==="Client"){const s=o.map(r=>r.fieldID==="client_id"?{...r,IsVisible:0}:r.fieldName==="job_title"?{...r,className:"w-full"}:r);c(s)}V()},[]);const $=async()=>{try{_(!0);const{data:s}=await U("rts/jobs/client/dashboard");S(s)}catch(s){C.error("Error fetching data: "+s.message,"Title"),console.error("Error:",s)}finally{_(!1)}},R=(s,r)=>{V(s,r),F(s)},V=async(s=null,r=null)=>{try{_(!0);let d=`?user_uuid=${P}&user_type=${v}`;if(v==="Client"){const J=localStorage.getItem("rts_user_link_id");d+=`&client_id=${J}`}else s&&(d+=`&client_id=${s}`),r!==null&&(d+=`&job_status=${r}`);const T=await fetch(`${re.API_URL}${He}${d}`),I=await T.json();T.ok?(h(I.data),I.data.length===0&&C.warning("No Records Found","Title"),t(I.data.length)):(C.error(I.message||"Error fetching data","Title"),t(0))}catch(d){C.error("Error fetching data: "+d.message,"Title"),console.error("Error:",d)}finally{_(!1),v==="Recruiter"&&$()}},B=s=>{const{name:r,checked:d,type:T}=s.target;if(T==="checkbox")i(I=>({...I,[r]:d}));else{const I=s.target.value;i(J=>({...J,[r]:I}))}},O=async s=>{try{if(v==="Client"){const T=localStorage.getItem("rts_user_link_id");if(T)s.client_id=T;else return C.error("Client ID not found in local storage!"),!1}if(!s.client_id||s.client_id===0)return C.error("Client is required to whom the Job is created!"),!1;const{status:r,data:d}=await me(Ge,{data:s});r===200&&d.code===200?(C.success(d.message),E(),g("table"),V()):C.warning(d.message)}catch(r){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",r),C.error("Something went wrong!")}},H=s=>{s.preventDefault(),O(f)},E=()=>{i(Y),a(0)},q=s=>{const r=m.find(d=>d[W]===s);a(s),i(r),g("entry")},X=s=>{const r=m.find(d=>d[W]===s);a(s),i(r),g("view")},A=()=>{E(),g("entry")},p=()=>{switch(j){case"entry":return e.jsx(De,{title:Q,primID:l,formData:f,formConfig:o,handleChange:B,handleSubmit:H,clearForm:E,onBack:()=>g("table")});case"view":return e.jsx(Ue,{title:Q,primID:l,formConfig:o,formData:f,onBack:()=>g("table"),handleEdit:q,handleAdd:A});case"table":default:return e.jsx(ze,{IDPK:W,cardViewFields:ce,tableFields:de,dataList:m,handleEdit:q,handleView:X,isCardView:b,setCardView:u})}};return e.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[n&&e.jsx(ae,{}),e.jsx("div",{className:"p-2",children:e.jsxs("div",{className:"space-y-2",children:[j==="table"&&e.jsx(Re,{title:Q,handleAdd:A,refresh:()=>V(N),TotalCount:x,filterContent:v==="Recruiter"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-600 uppercase tracking-wide mb-2.5",children:"Filter by Client"}),e.jsx("div",{className:"flex overflow-x-auto gap-2 custom-scroll pb-1",children:D&&D.length>0&&D.map(s=>e.jsxs("button",{onClick:()=>R(s.client_id),className:`flex flex-col items-start px-3 py-2 rounded-lg text-xs transition-all whitespace-nowrap flex-shrink-0 border-2 ${N===s.client_id?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 border-gray-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:[e.jsx("span",{className:"font-semibold",children:s.client_name}),e.jsxs("div",{className:"flex gap-1.5 mt-1.5 text-xs",children:[e.jsxs("span",{className:`px-1.5 py-0.5 rounded font-medium ${N===s.client_id?"bg-indigo-500":"bg-gray-100 text-gray-700"}`,children:[s.no_of_jobs," Total"]}),e.jsxs("span",{className:`px-1.5 py-0.5 rounded font-medium ${N===s.client_id?"bg-green-500":"bg-green-100 text-green-700"}`,children:[s.no_of_job_open," Open"]})]})]},s.client_id))})]}):null}),j!=="table"&&e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100",children:p()}),j==="table"&&p()]})})]})};export{ft as default};

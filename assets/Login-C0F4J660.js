import{j as e}from"./index-DNa0Yil1.js";import{r as o,h as y}from"./react-vendor-C96nFidc.js";import{c as d}from"./config-BbshSSl6.js";import{L as j}from"./Loading-D3nLJ_fK.js";import{y as a}from"./ui-vendor-CrwEJxT6.js";const v=async t=>{const l=`${d.API_URL}rts/auth/login`;try{const s=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Error in loginAPI:",s),s}},L=()=>{const[t,l]=o.useState({username:"",password:""}),[s,i]=o.useState(!1),[u,m]=o.useState(!1),n=y(),g=o.useRef(null),p=o.useRef(null);o.useEffect(()=>{const r=localStorage.getItem("loginTime"),c=new Date().getTime();r&&c-r>1440*60*1e3&&(localStorage.clear(),a.warning("Session expired. Please login again.",{position:"top-right",autoClose:2e3}),n("/rts/login")),localStorage.getItem("rts_user_uuid")&&n("/rts/dashboard"),g.current.focus()},[n]);const b=r=>{a.success("Login Successful",{position:"bottom-right",autoClose:2e3}),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("rts_user_uuid",r.user_uuid),localStorage.setItem("rts_user_name",r.user_name),localStorage.setItem("rts_user_image",r.user_image),localStorage.setItem("rts_user_type",r.user_type),localStorage.setItem("rts_user_id",r.user_id),localStorage.setItem("rts_user_link_id",r.user_link_id),localStorage.setItem("rts_token",r.token),localStorage.setItem("loginTime",new Date().getTime()),n("/rts/dashboard")},f=async()=>{if(t.username&&t.password){i(!0);try{const r=await v(t),{code:c,message:x,data:w}=r;c===200?b(w):a.error(x,{position:"top-right",autoClose:2e3})}catch(r){a.error("An error occurred during login: "+r.message,{position:"top-right",autoClose:3e3})}finally{i(!1)}}else a.warning("Please enter both username and password.",{position:"top-right",autoClose:2e3})},h=r=>{r.key==="Enter"&&(r.target.id==="username"?p.current.focus():r.target.id==="password"&&f())};return e.jsxs(e.Fragment,{children:[s&&e.jsx(j,{}),e.jsxs("div",{className:"relative flex items-center justify-center w-full h-screen overflow-hidden bg-gradient-to-br from-emerald-50 via-teal-50 to-emerald-100",children:[!u&&e.jsx("img",{src:`${d.IMAGE_URL}branding/placeholder.jpg`,alt:"Placeholder",className:"absolute top-0 left-0 w-full h-full object-cover opacity-30"}),e.jsxs("video",{className:"absolute top-0 left-0 w-full h-full object-cover opacity-30",autoPlay:!0,muted:!0,loop:!0,onCanPlayThrough:()=>m(!0),onError:()=>m(!1),style:{display:u?"block":"none"},children:[e.jsx("source",{src:"https://raahtechservices.com/documents/images/branding/1738594-hd_1920_1080_30fps.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),e.jsx("div",{className:"absolute top-10 right-10 w-72 h-72 bg-emerald-200 rounded-full blur-3xl opacity-20 animate-pulse"}),e.jsx("div",{className:"absolute bottom-10 left-10 w-96 h-96 bg-teal-200 rounded-full blur-3xl opacity-20 animate-pulse"}),e.jsxs("div",{className:"relative w-full max-w-md p-10 m-4 bg-white rounded-3xl shadow-2xl backdrop-blur-xl border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("a",{href:"/",className:"inline-block mb-6",children:e.jsx("img",{src:`${d.IMAGE_URL}branding/logo1.png`,alt:"Company Logo",className:"w-56 h-auto mx-auto transition-transform hover:scale-105"})}),e.jsx("div",{className:"inline-flex items-center justify-center px-4 py-1.5 mb-4 rounded-full bg-gradient-to-r from-emerald-100 to-teal-100 border border-emerald-200",children:e.jsx("span",{className:"text-xs font-bold text-emerald-700 uppercase tracking-wider",children:"ðŸš€ Recruitment Portal"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-900 tracking-tight",children:"Welcome Back"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2 font-medium",children:"Sign in to access your dashboard"})]}),e.jsxs("form",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-xs font-bold text-gray-700 uppercase tracking-wider mb-2",children:"User Name"}),e.jsx("input",{type:"text",id:"username",ref:g,value:t.username,onChange:r=>l({...t,username:r.target.value}),onKeyDown:h,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 bg-gray-50 transition-all duration-200 font-medium",placeholder:"Enter your username"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-xs font-bold text-gray-700 uppercase tracking-wider mb-2",children:"Password"}),e.jsx("input",{type:"password",id:"password",ref:p,value:t.password,onChange:r=>l({...t,password:r.target.value}),onKeyDown:h,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 bg-gray-50 transition-all duration-200 font-medium",placeholder:"Enter your password"})]}),e.jsx("button",{type:"button",className:"w-full px-6 py-3.5 text-white font-bold rounded-xl bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 shadow-lg shadow-emerald-200 hover:shadow-xl hover:shadow-emerald-300 transition-all duration-300 transform hover:-translate-y-0.5 active:scale-95 uppercase tracking-wide text-sm",onClick:f,children:"Sign In"})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-100 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Powered by ",e.jsx("span",{className:"font-bold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent",children:"Raah Tech Services"})]})})]})]})]})};export{L as default};

import{j as e}from"./index-BRtCjCOM.js";import{r as l,h as D}from"./react-vendor-C96nFidc.js";import{y as B,C as f,K as R,an as S,M as L}from"./index-Dhm8vqgr.js";import{g as T,B as E,I as $,D as P,C as z,a as I,L as J,b as W,c as H,d as O,A as U,p as M,e as G,f as K,i as V}from"./InterviewTimeline-BeVlTxdn.js";import{C as x}from"./index-Bakdoaq0.js";import{P as q}from"./PostAPI-Dm7qi3aC.js";import{L as Q}from"./Loading-PFELjOwu.js";import{y as m}from"./ui-vendor-CrwEJxT6.js";import{m as y}from"./proxy-Dfj6t8uf.js";import"./icons-vendor-D-G97rvP.js";import"./memoize-one.esm-DQq2xVVF.js";import"./inheritsLoose-MEHl_3-6.js";import"./react-lifecycles-compat.es-Bz2kNPGS.js";import"./moment-bKu5bFg9.js";import"./config-BbshSSl6.js";z.register(I,J,W,H,O,U,M,G,K,V);const me=()=>{const[N,h]=l.useState(!0),[i,g]=l.useState(!1),[o,v]=l.useState(null),d=D();l.useEffect(()=>{b()},[]);const b=async(s=!1)=>{s?g(!0):h(!0);try{const a=localStorage.getItem("rts_user_uuid"),c=(await q("rts/dashboard/recruiter",{user_uuid:a})).data;c.code===200?(v(c.data),s&&m.success("Dashboard updated")):m.error(c.message||"Failed to load dashboard")}catch(a){console.error("Dashboard fetch error:",a),m.error("Failed to load dashboard data")}finally{h(!1),g(!1)}},p={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1f2937",titleFont:{size:13},bodyFont:{size:12},padding:10,cornerRadius:8,displayColors:!1}},scales:{x:{grid:{display:!1},ticks:{font:{size:11},color:"#9CA3AF"}},y:{grid:{color:"#F3F4F6",borderDash:[5,5]},ticks:{font:{size:11},color:"#9CA3AF",maxTicksLimit:5}}}};if(N&&!o)return e.jsx(Q,{});if(!o)return e.jsx("div",{className:"p-10 text-center text-gray-400",children:"Unable to load dashboard data."});const{metrics:t,jobs_by_status:n,applications_by_stage:u,recent_applications:_,top_jobs:w,monthly_trend:j}=o,C=[{title:"Total Clients",value:t.total_clients,icon:e.jsx(B,{}),color:"text-blue-600",bg:"bg-blue-100"},{title:"Active Jobs",value:t.total_jobs,icon:e.jsx(f,{}),color:"text-teal-600",bg:"bg-teal-100"},{title:"Total Candidates",value:t.total_candidates,icon:e.jsx(R,{}),color:"text-indigo-600",bg:"bg-indigo-100"},{title:"Total Applications",value:t.total_applications,icon:e.jsx(f,{}),color:"text-emerald-600",bg:"bg-emerald-100"}],A={labels:j.map(s=>s.month),datasets:[{label:"Applications",data:j.map(s=>s.count),fill:!0,backgroundColor:s=>{const r=s.chart.ctx.createLinearGradient(0,0,0,300);return r.addColorStop(0,"rgba(16, 185, 129, 0.2)"),r.addColorStop(1,"rgba(16, 185, 129, 0)"),r},borderColor:"#10B981",borderWidth:2,tension:.4,pointBackgroundColor:"#ffffff",pointBorderColor:"#10B981",pointBorderWidth:2,pointRadius:4}]},F={labels:u.map(s=>s.stage_name),datasets:[{label:"Candidates",data:u.map(s=>s.count),backgroundColor:"#34D399",borderRadius:6,barThickness:28,hoverBackgroundColor:"#10B981"}]},k={labels:n.map(s=>s.job_status),datasets:[{data:n.map(s=>s.count),backgroundColor:["#10B981","#F87171","#FBBF24"],borderWidth:0,hoverOffset:4}]};return e.jsxs("div",{className:"p-4 sm:p-8 bg-gray-50 min-h-screen font-sans text-gray-800",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:"Dashboard Overview"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Welcome back! Here's what's happening today."})]}),e.jsxs("button",{onClick:()=>b(!0),disabled:i,className:`
            flex items-center gap-2 px-5 py-2.5 bg-white border border-gray-200 rounded-full 
            text-sm font-semibold text-gray-600 shadow-sm hover:shadow-md hover:border-emerald-200 hover:text-emerald-600 
            transition-all active:scale-95
          `,children:[e.jsx(S,{className:`text-xs ${i?"animate-spin text-emerald-500":""}`}),e.jsx("span",{children:i?"Refreshing...":"Refresh Data"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:C.map((s,a)=>e.jsx(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:a*.05},className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100 hover:shadow-lg transition-shadow duration-300",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:s.title}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.jsx(x,{end:s.value,duration:2,separator:","})})]}),e.jsx("div",{className:`p-3 rounded-xl ${s.bg} ${s.color} text-lg`,children:s.icon})]})},a))}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Application Trend"}),e.jsx("span",{className:"text-xs font-medium text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:"This Month"})]}),e.jsx("div",{className:"h-60",children:e.jsx(T,{data:A,options:p})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-6",children:"Pipeline Stages"}),e.jsx("div",{className:"h-60",children:e.jsx(E,{data:F,options:p})})]})]}),e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-50 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-800",children:"Recent Applications"}),e.jsx("button",{onClick:()=>d("/rts/jobs"),className:"text-sm text-emerald-600 font-medium hover:text-emerald-700 hover:underline",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-gray-50/50 text-gray-500 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Candidate"}),e.jsx("th",{className:"px-6 py-4",children:"Job Role"}),e.jsx("th",{className:"px-6 py-4",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-50",children:_.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-50/50 transition-colors group",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full uppercase bg-emerald-100 text-emerald-600 flex items-center justify-center font-bold text-xs",children:s.candidate_name?s.candidate_name.charAt(0):s.candidate_email.charAt(0)}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-gray-700",children:s.candidate_name||(s==null?void 0:s.candidate_email.split("@")[0])}),e.jsx("p",{className:"text-xs text-gray-400",children:s.candidate_email||""})]})]})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:s.job_title}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`
                          inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                          ${s.status_name==="Hired"?"bg-green-50 text-green-700":s.status_name==="Rejected"?"bg-red-50 text-red-700":"bg-blue-50 text-blue-700"}
                        `,children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-1.5 
                            ${s.status_name==="Hired"?"bg-green-500":s.status_name==="Rejected"?"bg-red-500":"bg-blue-500"}`}),s.status_name]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("button",{onClick:()=>d(`/rts/job_application/${s.job_app_uuid}`),className:"text-gray-400 hover:text-emerald-600 transition-colors p-2 rounded-full hover:bg-emerald-50",children:e.jsx(L,{size:12})})})]},a))})]})})]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Interview Schedule"}),e.jsx($,{})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Job Status"}),e.jsxs("div",{className:"h-48 relative flex items-center justify-center",children:[e.jsx(P,{data:k,options:{cutout:"75%",plugins:{legend:{display:!1}}}}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-800",children:e.jsx(x,{end:t.total_jobs,duration:2.5})}),e.jsx("span",{className:"text-xs text-gray-400",children:"Total Jobs"})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2 text-center",children:n.map((s,a)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs text-gray-400",children:s.job_status}),e.jsx("span",{className:"font-bold text-gray-700",children:e.jsx(x,{end:s.count,duration:1.5})})]},a))})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[e.jsx("h3",{className:"font-bold text-gray-800 mb-4",children:"Top Performing Jobs"}),e.jsx("div",{className:"space-y-4",children:w.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between group cursor-pointer",onClick:()=>d(`/rts/jobs/${s.uuid}`),children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 group-hover:text-emerald-600 transition-colors line-clamp-1",children:s.job_title}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:s.client_name})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"text-xs font-bold text-gray-700 bg-gray-100 px-2 py-1 rounded-md",children:[s.application_count," Apps"]})})]},a))})]})]})]})]})};export{me as default};

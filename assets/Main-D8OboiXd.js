import{j as e,r as d,D as H,y as T}from"./index-CZnZ3_Xc.js";import{C as _,I as $,H as K,V as W,R as G,T as B,a as O,b as Q}from"./TableView-BP99unTH.js";import{B as u}from"./ButtonMini-DaKL8FPv.js";import{R as Z}from"./react-paginate-onx4t7DI.js";import{P as q}from"./PostAPI-Dm7qi3aC.js";import{c as z}from"./config-BbshSSl6.js";import"./with-selector-CZ8qNQPs.js";import"./circle-check-Dj0XS26Q.js";const R={UserIDPK:0,UserName:"",UserEmail:"",UserPassword:"",UserContact:"",UserMenuRights:"",IsSuperUser:!1,IsAdmin:!1,IsDefault:!1,IsUserLogin:"",UserGroupID:"",UserGroupName:"",FirstName:"",LastName:"",DateOfBirth:"",Gender:"",Address:"",City:"",State:"",ZipCode:"",Country:"",ProfilePicture:"",LastLoginTime:"",FailedLoginAttempts:"",AccountLocked:"",AccountExpiryDate:"",ResetPasswordToken:"",SecurityQuestion:"",SecurityAnswer:"",IsActive:!0,IsDraft:!1,DeleStat:"",Remarks:"",CreatedUserID:localStorage.getItem("uid"),UpdatedUserID:0,CreatedTtm:"",UpdatedTtm:""},J=[{fieldName:"UserName",type:"text",label:"User Name",IsVisible:!0,className:"w-full"},{fieldName:"UserEmail",type:"text",label:"Email",IsVisible:!0,className:"w-full"},{fieldName:"UserContact",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"coursesCount",type:"text",label:"Courses Enrolled",IsVisible:!0,className:"w-1/2"},{fieldName:"IsActive",type:"boolean",label:"Is Active",IsVisible:!0}],X=[{fieldName:"UserName",type:"text",label:"User Name",IsVisible:!0,className:"w-full"},{fieldName:"UserEmail",type:"text",label:"Email",IsVisible:!0,className:"w-1/2"},{fieldName:"UserContact",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"City",type:"text",label:"Width",IsVisible:!0,className:"w-full"},{fieldName:"IsActive",type:"boolean",label:"Is Active",IsVisible:!0}],M=[{label:"Intern Name",fieldName:"UserName",type:"text",className:"w-full md:w-1/2",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Intern Email",fieldName:"UserEmail",type:"email",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Contact No.",fieldName:"UserContact",type:"number",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Active",fieldName:"IsActive",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0}],Y=({handleSubmit:f,clearForm:c,primID:l,formConfig:n,formData:o,handleChange:m,onBack:t,title:p})=>e.jsxs("form",{onSubmit:f,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>t("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:p})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[l?e.jsx(u,{className:"hidden md:flex",name:"Close",onClick:t,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"hidden md:flex",name:"Close",onClick:t,color:"red",icon:"close"}),e.jsx(u,{className:"hidden md:flex",name:"Clear",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(u,{className:"hidden md:flex",name:l>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:n.map(r=>r.type==="checkbox"&&r.IsVisible?e.jsx(_,{field:r,formData:o,handleChange:m},r.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:n.map(r=>r.type!=="checkbox"&&r.IsVisible?e.jsx($,{field:r,formData:o,handleChange:m},r.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[l?e.jsx(u,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}),e.jsx(u,{name:"Clear",className:"text-lg",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(u,{name:l>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),ee=({formConfig:f,formData:c,primID:l,onBack:n,handleEdit:o,handleAdd:m,title:t})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(K,{title:t,onBack:n,handleEdit:o,handleAdd:m,primID:l}),e.jsx(W,{formConfig:f,formData:c}),e.jsx(G,{onBack:n,handleAdd:m,handleEdit:o,primID:l})]})}),se=({handleAdd:f,title:c,refresh:l,TotalCount:n})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-md border border-0 border-l-2 border-indigo-600 pl-2 font-bold text-indigo-600",children:[c," ",n?`(${n})`:""]}),e.jsx("i",{title:"Refresh",onClick:l,className:"bi bi-arrow-clockwise ml-2 cursor-pointer text-indigo-700"})]}),e.jsx("div",{children:e.jsx(u,{className:"hidden md:flex",name:"Add",onClick:f,color:"indigo",icon:"add"})})]}),ae=({tableFields:f,cardViewFields:c,dataList:l,handleEdit:n,handleView:o,title:m,isCardView:t,setCardView:p,IDPK:r})=>{const[C,k]=d.useState(""),[h,g]=d.useState(0),[x,y]=d.useState(20),[N,V]=d.useState([null,null]),[w,j]=N,b=(a,P)=>{P(a.target.value),g(0)},v=()=>{p(!t),g(0)},A=({selected:a})=>{g(a)},D=a=>{b(a,y)},U=l.filter(a=>{const I=Object.values(a).join(" ").toLowerCase().includes(C.toLowerCase()),S=new Date(a.CreatedTtm),L=w?new Date(w.setHours(0,0,0,0)):null,E=j?new Date(j.setHours(23,59,59,999)):null,F=(!L||S>=L)&&(!E||S<=E);return I&&F}),s=U.slice(h*x,(h+1)*x),i=Math.ceil(U.length/x);return e.jsxs("div",{className:"p-1",children:[e.jsx(B,{handleSearchChange:a=>b(a,k),searchInput:C,toggleView:v,isCardView:t,handleItemsPerPageChange:D,itemsPerPage:x,setCurrentPage:g,setDateRange:V,startDate:w,endDate:j,count:s.length}),t?e.jsx(O,{data:s,cardViewFields:c,handleEdit:n,handleView:o,title:m,IDPK:r}):e.jsx(Q,{tableFields:f,dataList:s,handleEdit:n,handleView:o,IDPK:r}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"fixed right-0 bottom-0 left-0 flex items-center justify-center space-x-2 bg-white p-2",children:e.jsx(Z,{pageCount:i,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:A,containerClassName:"pagination ml-2",activeClassName:"active",breakClassName:"break-me",pageClassName:"page",pageLinkClassName:"page-link",previousClassName:"previous",previousLinkClassName:"previous-link",nextClassName:"next",nextLinkClassName:"next-link",disabledClassName:"disabled"})})})]})},te="UserIDPK",ue=f=>{const[c,l]=d.useState(R),[n,o]=d.useState([]),[m,t]=d.useState("table"),[p,r]=d.useState(0),[C,k]=d.useState(!1),[h,g]=H(),x=parseInt(h.get("per_page"))||1e3,y=parseInt(h.get("page"))||1;d.useEffect(()=>{N()},[x,y]);const N=async()=>{try{const s=await fetch(`${z.API_URL}users?per_page=${x}&page=${y}&username=`);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const i=await s.json();o(i.data)}catch(s){console.error("Error fetching data:",s)}},V=s=>{const{name:i,checked:a,type:P}=s.target;if(P==="checkbox")l(I=>({...I,[i]:a}));else{const I=s.target.value;l(S=>({...S,[i]:I}))}},w=async s=>{try{const{status:i,data:a}=await q("user_save",{data:s});i===200&&a.code===200?(T.success(a.message),b(),t("table"),N()):T.warning(a.message)}catch(i){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",i),T.error("something went wrong!")}},j=s=>{s.preventDefault(),w(c)},b=()=>{l(R),r(0)},v=s=>{const i=n.find(a=>a.UserIDPK===s);r(s),l(i),t("entry")},A=s=>{console.log("ðŸš€ ~ file: Main.js:92 ~ handleView ~ id:",s);const i=n.find(a=>a.UserIDPK===s);console.log("ðŸš€ ~ file: Main.js:94 ~ handleView ~ foundUser:",i),r(s),l(i),t("view")},D=()=>{b(),t("entry")},U=()=>{switch(m){case"entry":return e.jsx(Y,{title:"Intern",primID:p,formData:c,formConfig:M,handleChange:V,handleSubmit:j,clearForm:b,onBack:()=>t("table")});case"view":return e.jsx(ee,{title:"Intern",primID:p,formConfig:M,formData:c,onBack:()=>t("table"),handleEdit:v,handleAdd:D});case"table":default:return e.jsx(ae,{IDPK:te,cardViewFields:J,tableFields:X,dataList:n,handleEdit:v,handleView:A,isCardView:C,setCardView:k})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:m==="table"&&e.jsx(se,{TotalCount:n.length||0,title:"Interns",handleAdd:D,refresh:N})})}),U()]})};export{ue as default};

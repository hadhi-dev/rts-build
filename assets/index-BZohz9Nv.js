import{j as e}from"./index-DNa0Yil1.js";import{B as F}from"./ButtonMini-DVOq2F3I.js";import{c as S}from"./config-BbshSSl6.js";import{G as D}from"./GetAPI-C0R9K2iB.js";import{r as _,i as E}from"./react-vendor-C96nFidc.js";import{F as C,a as k,b as T,c as P,d as y,e as g,f as Y,g as $,h as L,i as M,j as R}from"./index-axgJKuQs.js";import{S as A,y as c}from"./ui-vendor-CrwEJxT6.js";import"./icons-vendor-D-G97rvP.js";const J=({appliedFrom:p,jobAppUUID:w,email:m,candidate:l})=>{const[i,f]=_.useState({first_name:l.first_name||"",last_name:l.last_name||"",email:l.email||m,phone:l.phone||"",alternate_phone:l.alternate_phone||"",current_company:l.current_company||"",current_ctc:l.current_ctc||"",expected_ctc:l.expected_ctc||"",notice_period:l.notice_period||"",resume:l.resume||"",photo:l.photo||"",proof_id:l.proof_id||"",skills:l.skills||"",education:l.education||"",certifications:l.certifications||"",current_location:l.current_location||"",native_location:l.native_location||"",available_date:l.available_date||""}),[v,b]=_.useState(!1),N=()=>{const u=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,t=/^[0-9]{10}$/,o=/^\d+(\.\d{1,2})?$/;for(let r in i)if(r!=="certifications"&&!i[r]&&r!=="alternate_phone")return c.error(`${r.replace("_"," ")} is required`),!1;return u.test(i.email)?t.test(i.phone)?t.test(i.alternate_phone)?i.alternate_phone&&i.phone===i.alternate_phone?(c.error("Alternate phone number must be different from primary phone number"),!1):o.test(i.current_ctc)?o.test(i.expected_ctc)?i.resume?!0:(c.error("Resume is required"),!1):(c.error("Expected CTC must be a valid number with up to 2 decimal places"),!1):(c.error("Current CTC must be a valid number with up to 2 decimal places"),!1):(c.error("Alternate Phone number must be 10 digits"),!1):(c.error("Phone number must be 10 digits"),!1):(c.error("Invalid email format"),!1)},n=u=>{const{name:t,value:o}=u.target;if(t==="current_ctc"||t==="expected_ctc"){let r=o.replace(/[^0-9.]/g,"");const[d,x]=r.split(".");let h=d.slice(0,2),j=x?x.slice(0,2):"";r=j?`${h}.${j}`:h,f(I=>({...I,[t]:r}))}else f(r=>({...r,[t]:o}))},a=u=>{const{name:t,files:o}=u.target,r=o[0];if(!r)return;const d=()=>{u.target.value=""};if(t==="resume"){if(r.type!=="application/pdf"){c.warning("Only PDF files are allowed for resumes."),d();return}if(r.size>10*1024*1024){c.warning("Resume file size must be below 10MB."),d();return}}else if(t==="photo"||t==="proof_id"){if(!r.type.startsWith("image/")){c.warning("Only image files are allowed for photo and proof ID."),d();return}if(r.size>5*1024*1024){c.warning("Image file size must be below 5MB."),d();return}}f(x=>({...x,[t]:r})),console.log("name, files",{name:t,files:o})},s=async u=>{if(u.preventDefault(),!!N()){b(!0);try{const t=new FormData;if(Object.keys(i).forEach(r=>{t.append(r,i[r])}),t.append("applied_from",p),!(await fetch(`${S.API_URL}rts/apply/job/job_applications/${w}/job_app_uuid`,{method:"POST",body:t})).ok)throw new Error("Failed to submit information.");A.fire({icon:"success",title:"Application Submitted",text:"Your application has been submitted successfully.",customClass:{confirmButton:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded text-white mr-2",cancelButton:"px-4 py-2 bg-gray-500 hover:bg-gray-600 rounded text-white"}}).then(()=>{window.location.reload()})}catch{A.fire({icon:"error",title:"Submission Error",text:"There was an error submitting your application. Please try again.",customClass:{confirmButton:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded text-white mr-2",cancelButton:"px-4 py-2 bg-gray-500 hover:bg-gray-600 rounded text-white"}})}finally{b(!1)}}};return e.jsxs("form",{onSubmit:s,className:"space-y-4 p-2 md:p-4 bg-white text-gray-800 md:rounded-lg md:shadow mx-auto",children:[e.jsx("div",{className:"flex flex-wrap -mx-2",children:[{label:"First Name",name:"first_name",type:"text",width:"w-full md:w-1/2"},{label:"Last Name",name:"last_name",type:"text",width:"w-full md:w-1/2"},{label:"Email",name:"email",type:"email",width:"w-full md:w-1/2"},{label:"Phone",name:"phone",type:"number",width:"w-full md:w-1/2"},{label:"Alternate Phone",name:"alternate_phone",type:"number",width:"w-full md:w-1/2"},{label:"Current Company",name:"current_company",type:"text",width:"w-full md:w-1/2"},{label:"Current CTC",name:"current_ctc",type:"number",width:"w-full md:w-1/3",suffix:"LPA"},{label:"Expected CTC",name:"expected_ctc",type:"number",width:"w-full md:w-1/3",suffix:"LPA"},{label:"Notice Period",name:"notice_period",type:"select",width:"w-full md:w-1/3",options:["Immediate",15,30,45,60,90]},{label:"Education",name:"education",type:"text",width:"w-full md:w-1/3"},{label:"Certifications",name:"certifications",type:"text",width:"w-full md:w-2/3"},{label:"Skills",name:"skills",type:"text",width:"w-full"},{label:"Current Location",name:"current_location",type:"text",width:"w-full md:w-2/5"},{label:"Native Location",name:"native_location",type:"text",width:"w-full md:w-2/5"},{label:"Available Date",name:"available_date",type:"date",width:"w-full md:w-1/5"},{label:"Attach Resume",name:"resume",type:"file",width:"w-full"},{label:"Attach Photo",name:"photo",type:"file",width:"w-full md:w-1/2"},{label:"Attach Proof ID (Aadhaar / Pan Card)",name:"proof_id",type:"file",width:"w-full md:w-1/2"}].map(({label:u,name:t,type:o,width:r,suffix:d,options:x})=>e.jsxs("div",{className:`px-2 mb-4 ${r} bg-white text-gray-800`,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:u}),o==="select"?e.jsxs("select",{name:t,value:i[t],onChange:n,className:"bg-white text-gray-800 block w-full border border-gray-300 p-2 text-sm rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select a notice period"}),x.map((h,j)=>e.jsxs("option",{value:j>0?h:0,children:[h,j>0?" days":""]},h))]}):e.jsxs("div",{className:"relative bg-white text-gray-800",children:[e.jsx("input",{type:o,disabled:t==="email",name:t,value:o==="file"?void 0:i[t],onChange:o==="file"?a:n,className:`bg-white block w-full border border-gray-300 p-2 text-sm rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition duration-200 ${o==="file"?"file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-700 file:text-white hover:file:bg-blue-600":""}`,required:["first_name","last_name","email","phone","current_company","current_ctc","expected_ctc","resume"].includes(t)}),d&&e.jsx("span",{className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500",children:d})]})]},t))}),e.jsx("button",{type:"submit",className:"w-full bg-blue-700 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:v,children:v?"Submitting...":"Submit"})]})},K=()=>{const{job_app_uuid:p,applied_from:w}=E(),[m,l]=_.useState({}),[i,f]=_.useState(!1);_.useEffect(()=>{(async()=>{const a=await D(`rts/apply/job/job_applications/${p}/get_jd`);l(a.data)})()},[p]);const v=({job:n})=>e.jsxs("div",{className:"flex flex-col gap-y-1 md:flex-row mb-2",children:[e.jsx(b,{label:"Experience Required",value:`${n.experience_required} years`,icon:e.jsx(k,{})}),e.jsx(b,{label:"Location",value:n.location,icon:e.jsx(T,{})}),e.jsx(b,{label:"Employment Type",value:n.employment_type,icon:e.jsx(P,{})}),e.jsx(b,{label:"Job Status",value:n.job_status,icon:n.job_status==="Closed"?e.jsx(y,{}):e.jsx(g,{})})]}),b=({label:n,value:a,icon:s})=>e.jsxs("div",{title:n,className:"flex items-center text-left mr-2 p-1 px-2 rounded-md shadow-sm bg-gray-50",children:[e.jsx("span",{className:"mr-2 text-blue-800",children:s}),e.jsx("span",{className:"text-blue-900",children:a})]}),N=({status:n})=>{let a,s;switch(n){case"1":a="The job has been shared with you. You can review and apply if interested.",s=e.jsx(R,{className:"text-blue-500"});break;case"2":a="You have successfully applied for this job.",s=e.jsx(g,{className:"text-green-500"});break;case"3":a="Your application has been rejected during the sourcing stage.",s=e.jsx(y,{className:"text-red-500"});break;case"4":a="You have shown interest in this position.",s=e.jsx(M,{className:"text-green-500"});break;case"5":a="Your application is currently under review.",s=e.jsx(k,{className:"text-yellow-500"});break;case"6":a="Your application has been rejected during the screening stage.",s=e.jsx(y,{className:"text-red-500"});break;case"7":a="You have passed the screening stage and are moving forward.",s=e.jsx(g,{className:"text-green-500"});break;case"8":a="Your interview has been scheduled. Please check the details.",s=e.jsx(L,{className:"text-blue-500"});break;case"9":a="You are currently interviewing for this position.",s=e.jsx(P,{className:"text-blue-500"});break;case"10":a="You have been rejected during the interview stage.",s=e.jsx(y,{className:"text-red-500"});break;case"11":a="An offer will be Made as you are selected during the Interview Stage.",s=e.jsx(g,{className:"text-blue-500"});break;case"12":a="An offer has been made. Please review and respond.",s=e.jsx($,{className:"text-blue-500"});break;case"13":a="You have accepted the job offer. Congratulations!",s=e.jsx(g,{className:"text-green-500"});break;case"14":a="The offer is currently on hold. Please wait for further updates.",s=e.jsx(Y,{className:"text-yellow-500"});break;case"15":a="The offer has been rejected.",s=e.jsx(y,{className:"text-red-500"});break;case"16":a="You have been hired for this position. Welcome aboard!",s=e.jsx(g,{className:"text-green-500"});break;case"17":a="You declined the offer after it was made.",s=e.jsx(C,{className:"text-gray-500"});break;default:a="Application status unknown.",s=e.jsx(C,{className:"text-gray-500"})}return e.jsxs("div",{className:"flex items-center p-4 bg-gray-100 rounded-md my-4",children:[s,e.jsx("span",{className:"ml-3 text-xs md:text-lg font-semibold text-gray-800",children:a})]})};return e.jsxs("div",{className:"max-w-3xl mx-auto mt-8 px-4 cursor-default bg-white",children:[e.jsx("a",{href:"/",children:e.jsx("img",{src:`${S.IMAGE_URL}branding/logo1.png`,alt:"Company Logo",className:"w-36 h-auto mb-2 transition-opacity duration-700 ease-out hover:opacity-75"})}),m.job?i?e.jsxs(e.Fragment,{children:[e.jsx(B,{title:m.job.job_title,onClick:()=>f(!1)}),e.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[e.jsx(C,{className:"mr-2 text-blue-500"}),e.jsx("span",{children:"Please ensure all fields are filled out accurately to proceed with your application."})]}),e.jsx(J,{appliedFrom:w,jobAppUUID:p,candidate:m.candidate})]}):e.jsxs("div",{className:"px-4",children:[e.jsx(N,{status:m.job_application.application_status}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between items-center my-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:m.job.job_title}),m.job_application.application_status==="1"&&e.jsx(F,{name:"Apply Now",className:"text-lg ",onClick:()=>f(!0),color:"blue",icon:"send"})]}),e.jsx(v,{job:m.job}),e.jsxs("div",{className:"bg-white mb-4 transition duration-500 ease-in-out transform",children:[e.jsx("h2",{className:"text-xl text-gray-800 border-b py-2 font-semibold mb-2",children:"Job Description"}),e.jsx("div",{className:"prose max-h-80 overflow-y-auto custom-scroll",dangerouslySetInnerHTML:{__html:m.job.job_description}})]})]}):e.jsx("p",{className:"transition-opacity duration-500 ease-in-out",children:"Sorry, Currently this Job is Unavailable..."})]})},B=({title:p,onClick:w})=>e.jsxs("div",{className:"flex justify-between items-center mt-3 mb-1",children:[e.jsx("h1",{className:"text-lg md:text-2xl font-bold text-blue-700",children:p}),e.jsx(F,{name:"Cancel",className:"text-xs md:text-lg",onClick:w,color:"green",icon:"close"})]});export{K as default};

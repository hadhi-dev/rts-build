import{c as A,j as e,r as f,U as F}from"./index-CTwupIc6.js";import{y as S}from"./CONSTANTS-DAkaMczv.js";import{c as L}from"./config-BbshSSl6.js";import{P as B}from"./PostAPI-Dm7qi3aC.js";import{C as H,I as $,T as z,a as X,b as Z,c as q,H as O,V as W,R as G}from"./TableView-BfJ1TjXl.js";import{B as u}from"./ButtonMini-DG-9Z1QU.js";import"./with-selector-hCPgY7BA.js";/* empty css                      *//**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],K=A("BadgeCheck",J);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]],Y=A("BadgeX",Q),E={CertificateID:0,UserID:null,UUID:"",CourseID:0,Status:"",IsComplete:0,IsPaymentUnderProcess:0,IsPaid:0,IsCertified:0,AmountReceived:"",Remarks:"",PaymentType:"",CertificatePath:"",EnrolledDate:"",PaymentImage:"",TransactionID:""},ee=[{fieldName:"IsPaid",type:"boolean",label:"Paid",IsVisible:!0,className:"w-1/2"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"UserName",type:"text",label:"Intern Name",IsVisible:!0,className:"w-full"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-1/2"},{fieldName:"EnrolledDate",type:"text",label:"Enrolled Date",IsVisible:!0,className:"w-1/2"}],se=[{fieldName:"UUID",type:"text",label:"UUID",IsVisible:!0,className:"w-full"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-full"},{fieldName:"UserName",type:"text",label:"Intern Name",IsVisible:!0,className:"w-full"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"IsComplete",type:"boolean",label:"Complete",IsVisible:!0,className:"w-1/2"},{fieldName:"IsPaid",type:"boolean",label:"Paid",IsVisible:!0,className:"w-1/2"},{fieldName:"IsCertified",type:"boolean",label:"Certified",IsVisible:!0,className:"w-1/2"},{fieldName:"AmountReceived",type:"number",label:"Amount Received",IsVisible:!0,className:"w-1/2"},{fieldName:"Remarks",type:"text",label:"Remarks",IsVisible:!0,className:"w-full"},{fieldName:"PaymentType",type:"text",label:"Payment Type",IsVisible:!0,className:"w-1/2"},{fieldName:"CertificatePath",type:"text",label:"Certificate Path",IsVisible:!0,className:"w-full"},{fieldName:"EnrolledDate",type:"text",label:"Enrolled Date",IsVisible:!0,className:"w-1/2"}],ae=[{label:"Course Name",fieldName:"CourseName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"Intern Name",fieldName:"UserName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"UUID",fieldName:"UUID",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:1},{label:"Status",fieldName:"Status",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Is Complete",fieldName:"IsComplete",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Is Payment Under Process",fieldName:"IsPaymentUnderProcess",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Is Paid",fieldName:"IsPaid",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Is Certified",fieldName:"IsCertified",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Amount Received",fieldName:"AmountReceived",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Remarks",fieldName:"Remarks",type:"text",className:"w-full",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Payment Type",fieldName:"PaymentType",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Certificate Path",fieldName:"CertificatePath",type:"text",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Enrolled Date",fieldName:"EnrolledDate",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Payment Image",fieldName:"PaymentImage",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Transaction ID",fieldName:"TransactionID",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0}],te=({handleSubmit:d,clearForm:c,primID:a,formConfig:r,formData:m,handleChange:o,onBack:t,title:N})=>e.jsxs("form",{onSubmit:d,className:"w-full",children:[e.jsxs("div",{className:"w-full flex gap-2 items-center justify-between",children:[e.jsxs("button",{className:"py-2 text-gray-700 flex items-center hover:bg-gray-200 focus:outline-none rounded-full",onClick:()=>t("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"ml-2 text-md font-bold text-blue-600 pr-2",children:N})]}),e.jsxs("div",{className:"w-full flex gap-2 items-center justify-end pr-2",children:[a?e.jsx(u,{className:"hidden md:flex",name:"Close",onClick:t,color:"blue",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"hidden md:flex",name:"Close",onClick:t,color:"red",icon:"close"}),e.jsx(u,{className:"hidden md:flex",name:"Clear",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(u,{className:"hidden md:flex",name:a>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"w-full flex p-2 gap-2 items-center justify-end",children:r.map(i=>i.type==="checkbox"&&i.IsVisible?e.jsx(H,{field:i,formData:m,handleChange:o},i.fieldName):"")}),e.jsx("div",{className:"w-full flex flex-wrap gap-y-2 mt-4",children:r.map(i=>i.type!=="checkbox"&&i.IsVisible?e.jsx($,{field:i,formData:m,handleChange:o},i.fieldName):null)}),e.jsx("div",{className:"w-full fixed bottom-0 bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[a?e.jsx(u,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}),e.jsx(u,{name:"Clear",className:"text-lg",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(u,{name:a>0?"Update":"Save",icon:"save",type:"submit",color:"blue"})]})})]}),le=({handleAdd:d,title:c,refresh:a,TotalCount:r})=>e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"border border-0 border-l-2 border-blue-600 pl-2 text-md font-bold text-blue-600",children:[c," (",r||0,")"]}),e.jsx("i",{title:"Refresh",onClick:a,className:"bi bi-arrow-clockwise ml-2 cursor-pointer text-blue-700"})]}),e.jsx("div",{children:e.jsx(u,{className:"hidden md:flex",name:"Add",onClick:d,color:"blue",icon:"add"})})]}),ie=({tableFields:d,cardViewFields:c,dataList:a,handleEdit:r,handleView:m,title:o,isCardView:t,setCardView:N,IDPK:i})=>{const[h,g]=f.useState(""),[v,w]=f.useState(0),[p,C]=f.useState(20),I=(s,l)=>{l(s.target.value),w(0)},D=()=>{N(!t),w(0)},k=({selected:s})=>{w(s)},V=s=>{I(s,C)},y=a.filter(s=>Object.values(s).join(" ").toLowerCase().includes(h.toLowerCase())),j=y.slice(v*p,(v+1)*p),U=Math.ceil(y.length/p),P=[{icon:"",color:"blue",title:"Certificate",functionNeed:(s,l)=>{let n=`${L.API_URL}certificate/${l.UUID}`;window.open(n,"_blank")}}];return e.jsxs("div",{className:"p-1",children:[e.jsx(z,{handleSearchChange:s=>I(s,g),searchInput:h,toggleView:D,isCardView:t,handleItemsPerPageChange:V,itemsPerPage:p}),e.jsxs("div",{className:"flex flex-wrap gap-x-4 justify-start mt-2",children:[e.jsx(T,{data:a,courseName:"Presentation Skills"}),e.jsx(T,{data:a,courseName:"Managerial Skills"}),e.jsx(T,{data:a,courseName:"HR Talent Acquisition"})]}),t?e.jsx(X,{data:j,cardViewFields:c,handleEdit:r,handleView:m,title:o,IDPK:i,actionsBtn:P}):e.jsx(Z,{tableFields:d,dataList:j,handleEdit:r,handleView:m,IDPK:i,actionsBtn:P}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-16"}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white p-2 flex items-center justify-center space-x-2",children:e.jsx(q,{pageCount:U,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:k,containerClassName:"pagination ml-2",activeClassName:"active",breakClassName:"break-me",breakLinkClassName:"break-link",pageClassName:"page",pageLinkClassName:"page-link",previousClassName:"previous ",previousLinkClassName:"previous-link",nextClassName:"next",nextLinkClassName:"next-link",disabledClassName:"disabled",onDoubleClick:s=>s.preventDefault()})})]})]})},T=({data:d,courseName:c})=>{const a=d.filter(t=>t.CourseName===c),r=a.length,m=a.filter(t=>t.IsCertified===0).length,o=a.filter(t=>t.IsCertified===1).length;return e.jsxs("div",{className:"flex flex-col p-4 bg-white border border-gray-200 rounded-lg shadow-sm w-full sm:w-64",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 truncate mb-4",children:c}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-50 text-blue-600 rounded-full",children:e.jsx(F,{size:16})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Enrolled"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-50 text-green-600 rounded-full",children:e.jsx(K,{size:16})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Certified"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:o})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-50 text-red-600 rounded-full",children:e.jsx(Y,{size:16})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500",children:"Not Certified"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:m})]})]})]})]})},re=({formConfig:d,formData:c,primID:a,onBack:r,handleEdit:m,handleAdd:o,title:t})=>e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full",children:[e.jsx(O,{title:t,onBack:r,handleEdit:m,handleAdd:o,primID:a}),e.jsx(W,{formConfig:d,formData:c}),e.jsx(G,{onBack:r,handleAdd:o,handleEdit:m,primID:a})]})}),R="CertificateID",be=({type:d})=>{const[c,a]=f.useState(E),[r,m]=f.useState(ae),[o,t]=f.useState([]),[N,i]=f.useState("table"),[h,g]=f.useState(0),[v,w]=f.useState(!1),[p,C]=f.useState("");f.useEffect(()=>{I(d)},[]);const I=async s=>{try{const l=await fetch(`${L.API_URL}coursecertificates`);if(!l.ok)throw new Error(`HTTP error! Status: ${l.status}`);const n=await l.json();if(s=="isUnderProcess"){const b=n.data.filter(x=>x.IsPaymentUnderProcess&&!x.IsPaid&&!x.IsCertified);t(b),C(b.length)}else if(s=="verified"){const b=n.data.filter(x=>x.IsPaymentUnderProcess&&x.IsPaid);t(b),C(b.length)}else t(n.data),C(n.data.length)}catch(l){console.error("Error fetching data:",l)}},D=s=>{const{name:l,checked:n,type:b}=s.target;if(b==="checkbox")a(x=>({...x,[l]:n}));else{const x=s.target.value;a(_=>({..._,[l]:x}))}},k=async s=>{try{const{status:l,data:n}=await B("coursecertificates_save",{data:s});l===200&&n.code===200?(S.success(n.message),y(),i("table"),I()):S.warning(n.message)}catch(l){console.error("🚀 ~ file: Main.js:71 ~ saveData ~ error:",l),S.error("something went wrong!")}},V=s=>{s.preventDefault(),k(c)},y=()=>{a(E),g(0)},j=s=>{const l=o.find(n=>n[R]===s);g(s),a(l),i("entry")},U=s=>{const l=o.find(n=>n[R]===s);g(s),a(l),i("view")},M=()=>{y(),i("entry")},P=()=>{switch(N){case"entry":return e.jsx(te,{title:"Certificates",primID:h,formData:c,formConfig:r,handleChange:D,handleSubmit:V,clearForm:y,onBack:()=>i("table")});case"view":return e.jsx(re,{title:"Certificates",primID:h,formConfig:r,formData:c,onBack:()=>i("table"),handleEdit:j,handleAdd:M});case"table":default:return e.jsx(ie,{IDPK:R,cardViewFields:ee,tableFields:se,dataList:o,handleEdit:j,handleView:U,isCardView:v,setCardView:w})}};return e.jsxs("div",{className:"w-screen md:w-full p-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex space-x-2 justify-between w-full",children:N==="table"&&e.jsx(le,{TotalCount:p,title:"Manage Certificates",handleAdd:M,refresh:I})})}),P()]})};export{be as default};

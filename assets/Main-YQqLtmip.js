import{j as e,r as u,H as k}from"./index-a-2xoVB0.js";import{C as T,I as L,H as E,V as U,R as F,T as R,a as O,b as H}from"./TableView-hmQQWN2o.js";import{B as d}from"./ButtonMini-DQaX6ZEM.js";import{R as _}from"./react-paginate-BM-prk32.js";import{P as $}from"./PostAPI-Dm7qi3aC.js";import{c as B}from"./config-BbshSSl6.js";import"./with-selector-BnGFwHvi.js";import"./chevron-down-CSFtf1A1.js";import"./circle-check-9I_rap1p.js";const A={CourseID:0,UserID:null,CourseName:"",CourseCode:"",Department:"",InstructorName:"",Description:"",StartDate:"",EndDate:"",IsActive:!0,CreatedAt:"",UpdatedAt:"",ShortDescription:"",OfferLetterTitle:"",CertificateTitle:"",Amount:""},W=[{fieldName:"IsActive",type:"boolean",label:"Active",IsVisible:!0,className:"w-1/2"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-full"},{fieldName:"Department",type:"text",label:"Department",IsVisible:!0,className:"w-full"},{fieldName:"NoOfTask",type:"text",label:"No Of Tasks",IsVisible:!0,className:"w-1/2"},{fieldName:"NoOfEnrolledUsers",type:"text",label:"Interns Enrolled",IsVisible:!0,className:"w-1/2"}],q=[{fieldName:"IsActive",type:"boolean",label:"Active",IsVisible:!0,className:"w-1/2"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-1/6"},{fieldName:"CourseCode",type:"text",label:"Course Duration",IsVisible:!0,className:"w-1/6"},{fieldName:"Department",type:"text",label:"Department",IsVisible:!0,className:"w-1/6"},{fieldName:"InstructorName",type:"text",label:"Instructor Name",IsVisible:!0,className:"w-1/6"},{fieldName:"CreatedAt",type:"text",label:"Created At",IsVisible:!0,className:"w-1/6"},{fieldName:"UpdatedAt",type:"text",label:"Updated At",IsVisible:!0,className:"w-1/6"}],M=[{label:"Course Name",fieldName:"CourseName",type:"text",className:"w-full md:w-2/4",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Course Duration (in hrs)",fieldName:"CourseCode",type:"number",className:"w-full md:w-1/4",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Course Fee (Amount)",fieldName:"Amount",type:"text",className:"w-full md:w-1/4",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Department",fieldName:"Department",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Instructor Name",fieldName:"InstructorName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Start Date",fieldName:"StartDate",type:"date",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"End Date",fieldName:"EndDate",type:"date",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Description",fieldName:"Description",type:"texteditor",className:"w-full",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Active",fieldName:"IsActive",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Short Description",fieldName:"ShortDescription",type:"text",className:"w-full md:w-2/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Offer Letter Title",fieldName:"OfferLetterTitle",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Certificate Title",fieldName:"CertificateTitle",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0}],z=({handleSubmit:f,clearForm:o,primID:l,formConfig:r,formData:c,handleChange:m,onBack:t,title:b})=>e.jsxs("form",{onSubmit:f,className:"w-full",children:[e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("button",{className:"flex items-center rounded-full py-2 text-gray-700 hover:bg-gray-200 focus:outline-none",onClick:()=>t("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"text-md ml-2 pr-2 font-bold text-indigo-600",children:b})]}),e.jsxs("div",{className:"flex w-full items-center justify-end gap-2 pr-2",children:[l?e.jsx(d,{className:"hidden md:flex",name:"Close",onClick:t,color:"indigo",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"hidden md:flex",name:"Close",onClick:t,color:"red",icon:"close"}),e.jsx(d,{className:"hidden md:flex",name:"Clear",onClick:o,color:"red",icon:"cancel"})]}),e.jsx(d,{className:"hidden md:flex",name:l>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"flex w-full items-center justify-end gap-2 p-2",children:r.map(i=>i.type==="checkbox"&&i.IsVisible?e.jsx(T,{field:i,formData:c,handleChange:m},i.fieldName):"")}),e.jsx("div",{className:"mt-4 flex w-full flex-wrap gap-y-2",children:r.map(i=>i.type!=="checkbox"&&i.IsVisible?e.jsx(L,{field:i,formData:c,handleChange:m},i.fieldName):null)}),e.jsx("div",{className:"fixed bottom-0 w-full bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[l?e.jsx(d,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(d,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}),e.jsx(d,{name:"Clear",className:"text-lg",onClick:o,color:"red",icon:"cancel"})]}),e.jsx(d,{name:l>0?"Update":"Save",icon:"save",type:"submit",color:"indigo"})]})})]}),G=({formConfig:f,formData:o,primID:l,onBack:r,handleEdit:c,handleAdd:m,title:t})=>e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"w-full bg-white",children:[e.jsx(E,{title:t,onBack:r,handleEdit:c,handleAdd:m,primID:l}),e.jsx(U,{formConfig:f,formData:o}),e.jsx(F,{onBack:r,handleAdd:m,handleEdit:c,primID:l})]})}),J=({handleAdd:f,title:o,refresh:l,TotalCount:r})=>e.jsxs("div",{className:"flex w-full items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"text-md border border-0 border-l-2 border-indigo-600 pl-2 font-bold text-indigo-600",children:[o," (",r||0,")"]}),e.jsx("i",{title:"Refresh",onClick:l,className:"bi bi-arrow-clockwise ml-2 cursor-pointer text-indigo-700"})]}),e.jsx("div",{children:e.jsx(d,{className:"hidden md:flex",name:"Add",onClick:f,color:"indigo",icon:"add"})})]}),K=({tableFields:f,cardViewFields:o,dataList:l,handleEdit:r,handleView:c,title:m,isCardView:t,setCardView:b,IDPK:i})=>{const[h,g]=u.useState(""),[x,w]=u.useState(0),[N,v]=u.useState(20),p=(a,j)=>{j(a.target.value),w(0)},I=()=>{b(!t),w(0)},D=({selected:a})=>{w(a)},C=a=>{p(a,v)},y=l.filter(a=>Object.values(a).join(" ").toLowerCase().includes(h.toLowerCase())),s=y.slice(x*N,(x+1)*N),n=Math.ceil(y.length/N);return e.jsxs("div",{className:"p-1",children:[e.jsx(R,{handleSearchChange:a=>p(a,g),searchInput:h,toggleView:I,isCardView:t,handleItemsPerPageChange:C,itemsPerPage:N}),t?e.jsx(O,{data:s,cardViewFields:o,handleEdit:r,handleView:c,title:m,IDPK:i}):e.jsx(H,{tableFields:f,dataList:s,handleEdit:r,handleView:c,IDPK:i}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-16"}),e.jsx("div",{className:"fixed right-0 bottom-0 left-0 flex items-center justify-center space-x-2 bg-white p-2",children:e.jsx(_,{pageCount:n,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:D,containerClassName:"pagination ml-2",activeClassName:"active",breakClassName:"break-me",breakLinkClassName:"break-link",pageClassName:"page",pageLinkClassName:"page-link",previousClassName:"previous ",previousLinkClassName:"previous-link",nextClassName:"next",nextLinkClassName:"next-link",disabledClassName:"disabled",onDoubleClick:a=>a.preventDefault()})})]})]})},S="CourseID",ie=f=>{const[o,l]=u.useState(A),[r,c]=u.useState([]),[m,t]=u.useState("table"),[b,i]=u.useState(0),[h,g]=u.useState(!1);u.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await fetch(`${B.API_URL}courses`);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.json();c(n.data)}catch(s){console.error("Error fetching data:",s)}},w=s=>{const{name:n,checked:a,type:j}=s.target;if(j==="checkbox")l(V=>({...V,[n]:a}));else{const V=s.target.value;l(P=>({...P,[n]:V}))}},N=async s=>{try{const{status:n,data:a}=await $("courses_save",{data:s});n===200&&a.code===200?(k.success(a.message),p(),t("table"),x()):k.warning(a.message)}catch(n){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",n),k.error("something went wrong!")}},v=s=>{s.preventDefault(),N(o)},p=()=>{l(A),i(0)},I=s=>{const n=r.find(a=>a[S]===s);i(s),l(n),t("entry")},D=s=>{const n=r.find(a=>a[S]===s);i(s),l(n),t("view")},C=()=>{p(),t("entry")},y=()=>{switch(m){case"entry":return e.jsx(z,{title:"Courses",primID:b,formData:o,formConfig:M,handleChange:w,handleSubmit:v,clearForm:p,onBack:()=>t("table")});case"view":return e.jsx(G,{title:"Courses",primID:b,formConfig:M,formData:o,onBack:()=>t("table"),handleEdit:I,handleAdd:C});case"table":default:return e.jsx(K,{IDPK:S,cardViewFields:W,tableFields:q,dataList:r,handleEdit:I,handleView:D,isCardView:h,setCardView:g})}};return e.jsxs("div",{className:"w-screen p-2 md:w-full",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex w-full justify-between space-x-2",children:m==="table"&&e.jsx(J,{title:"Manage Courses",handleAdd:C,refresh:x})})}),y()]})};export{ie as default};

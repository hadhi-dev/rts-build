import{j as e,r as u}from"./index-CTwupIc6.js";import{C as T,I as L,H as E,V as U,R as F,T as O,a as R,b as H,c as _}from"./TableView-BfJ1TjXl.js";import{B as d}from"./ButtonMini-DG-9Z1QU.js";import{P as $}from"./PostAPI-Dm7qi3aC.js";import{y as k}from"./CONSTANTS-DAkaMczv.js";import{c as B}from"./config-BbshSSl6.js";import"./with-selector-hCPgY7BA.js";/* empty css                      */const A={CourseID:0,UserID:null,CourseName:"",CourseCode:"",Department:"",InstructorName:"",Description:"",StartDate:"",EndDate:"",IsActive:!0,CreatedAt:"",UpdatedAt:"",ShortDescription:"",OfferLetterTitle:"",CertificateTitle:"",Amount:""},W=[{fieldName:"IsActive",type:"boolean",label:"Active",IsVisible:!0,className:"w-1/2"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-full"},{fieldName:"Department",type:"text",label:"Department",IsVisible:!0,className:"w-full"},{fieldName:"NoOfTask",type:"text",label:"No Of Tasks",IsVisible:!0,className:"w-1/2"},{fieldName:"NoOfEnrolledUsers",type:"text",label:"Interns Enrolled",IsVisible:!0,className:"w-1/2"}],q=[{fieldName:"IsActive",type:"boolean",label:"Active",IsVisible:!0,className:"w-1/2"},{fieldName:"CourseName",type:"text",label:"Course Name",IsVisible:!0,className:"w-1/6"},{fieldName:"CourseCode",type:"text",label:"Course Duration",IsVisible:!0,className:"w-1/6"},{fieldName:"Department",type:"text",label:"Department",IsVisible:!0,className:"w-1/6"},{fieldName:"InstructorName",type:"text",label:"Instructor Name",IsVisible:!0,className:"w-1/6"},{fieldName:"CreatedAt",type:"text",label:"Created At",IsVisible:!0,className:"w-1/6"},{fieldName:"UpdatedAt",type:"text",label:"Updated At",IsVisible:!0,className:"w-1/6"}],M=[{label:"Course Name",fieldName:"CourseName",type:"text",className:"w-full md:w-2/4",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Course Duration (in hrs)",fieldName:"CourseCode",type:"number",className:"w-full md:w-1/4",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Course Fee (Amount)",fieldName:"Amount",type:"text",className:"w-full md:w-1/4",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Department",fieldName:"Department",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Instructor Name",fieldName:"InstructorName",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Start Date",fieldName:"StartDate",type:"date",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"End Date",fieldName:"EndDate",type:"date",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Description",fieldName:"Description",type:"texteditor",className:"w-full",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Active",fieldName:"IsActive",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Short Description",fieldName:"ShortDescription",type:"text",className:"w-full md:w-2/3",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Offer Letter Title",fieldName:"OfferLetterTitle",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:0,IsDisable:0},{label:"Certificate Title",fieldName:"CertificateTitle",type:"text",className:"w-full md:w-1/3",IsMandatory:0,IsVisible:1,IsDisable:0}],z=({handleSubmit:b,clearForm:c,primID:l,formConfig:r,formData:o,handleChange:m,onBack:t,title:f})=>e.jsxs("form",{onSubmit:b,className:"w-full",children:[e.jsxs("div",{className:"w-full flex gap-2 items-center justify-between",children:[e.jsxs("button",{className:"py-2 text-gray-700 flex items-center hover:bg-gray-200 focus:outline-none rounded-full",onClick:()=>t("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"ml-2 text-md font-bold text-blue-600 pr-2",children:f})]}),e.jsxs("div",{className:"w-full flex gap-2 items-center justify-end pr-2",children:[l?e.jsx(d,{className:"hidden md:flex",name:"Close",onClick:t,color:"blue",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(d,{className:"hidden md:flex",name:"Close",onClick:t,color:"red",icon:"close"}),e.jsx(d,{className:"hidden md:flex",name:"Clear",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(d,{className:"hidden md:flex",name:l>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"w-full flex p-2 gap-2 items-center justify-end",children:r.map(i=>i.type==="checkbox"&&i.IsVisible?e.jsx(T,{field:i,formData:o,handleChange:m},i.fieldName):"")}),e.jsx("div",{className:"w-full flex flex-wrap gap-y-2 mt-4",children:r.map(i=>i.type!=="checkbox"&&i.IsVisible?e.jsx(L,{field:i,formData:o,handleChange:m},i.fieldName):null)}),e.jsx("div",{className:"w-full fixed bottom-0 bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[l?e.jsx(d,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(d,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}),e.jsx(d,{name:"Clear",className:"text-lg",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(d,{name:l>0?"Update":"Save",icon:"save",type:"submit",color:"blue"})]})})]}),G=({formConfig:b,formData:c,primID:l,onBack:r,handleEdit:o,handleAdd:m,title:t})=>e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full",children:[e.jsx(E,{title:t,onBack:r,handleEdit:o,handleAdd:m,primID:l}),e.jsx(U,{formConfig:b,formData:c}),e.jsx(F,{onBack:r,handleAdd:m,handleEdit:o,primID:l})]})}),J=({handleAdd:b,title:c,refresh:l,TotalCount:r})=>e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"border border-0 border-l-2 border-blue-600 pl-2 text-md font-bold text-blue-600",children:[c," (",r||0,")"]}),e.jsx("i",{title:"Refresh",onClick:l,className:"bi bi-arrow-clockwise ml-2 cursor-pointer text-blue-700"})]}),e.jsx("div",{children:e.jsx(d,{className:"hidden md:flex",name:"Add",onClick:b,color:"blue",icon:"add"})})]}),K=({tableFields:b,cardViewFields:c,dataList:l,handleEdit:r,handleView:o,title:m,isCardView:t,setCardView:f,IDPK:i})=>{const[h,g]=u.useState(""),[x,w]=u.useState(0),[N,v]=u.useState(20),p=(a,j)=>{j(a.target.value),w(0)},I=()=>{f(!t),w(0)},D=({selected:a})=>{w(a)},C=a=>{p(a,v)},y=l.filter(a=>Object.values(a).join(" ").toLowerCase().includes(h.toLowerCase())),s=y.slice(x*N,(x+1)*N),n=Math.ceil(y.length/N);return e.jsxs("div",{className:"p-1",children:[e.jsx(O,{handleSearchChange:a=>p(a,g),searchInput:h,toggleView:I,isCardView:t,handleItemsPerPageChange:C,itemsPerPage:N}),t?e.jsx(R,{data:s,cardViewFields:c,handleEdit:r,handleView:o,title:m,IDPK:i}):e.jsx(H,{tableFields:b,dataList:s,handleEdit:r,handleView:o,IDPK:i}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"mb-16"}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white p-2 flex items-center justify-center space-x-2",children:e.jsx(_,{pageCount:n,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:D,containerClassName:"pagination ml-2",activeClassName:"active",breakClassName:"break-me",breakLinkClassName:"break-link",pageClassName:"page",pageLinkClassName:"page-link",previousClassName:"previous ",previousLinkClassName:"previous-link",nextClassName:"next",nextLinkClassName:"next-link",disabledClassName:"disabled",onDoubleClick:a=>a.preventDefault()})})]})]})},S="CourseID",le=b=>{const[c,l]=u.useState(A),[r,o]=u.useState([]),[m,t]=u.useState("table"),[f,i]=u.useState(0),[h,g]=u.useState(!1);u.useEffect(()=>{x()},[]);const x=async()=>{try{const s=await fetch(`${B.API_URL}courses`);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const n=await s.json();o(n.data)}catch(s){console.error("Error fetching data:",s)}},w=s=>{const{name:n,checked:a,type:j}=s.target;if(j==="checkbox")l(V=>({...V,[n]:a}));else{const V=s.target.value;l(P=>({...P,[n]:V}))}},N=async s=>{try{const{status:n,data:a}=await $("courses_save",{data:s});n===200&&a.code===200?(k.success(a.message),p(),t("table"),x()):k.warning(a.message)}catch(n){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",n),k.error("something went wrong!")}},v=s=>{s.preventDefault(),N(c)},p=()=>{l(A),i(0)},I=s=>{const n=r.find(a=>a[S]===s);i(s),l(n),t("entry")},D=s=>{const n=r.find(a=>a[S]===s);i(s),l(n),t("view")},C=()=>{p(),t("entry")},y=()=>{switch(m){case"entry":return e.jsx(z,{title:"Courses",primID:f,formData:c,formConfig:M,handleChange:w,handleSubmit:v,clearForm:p,onBack:()=>t("table")});case"view":return e.jsx(G,{title:"Courses",primID:f,formConfig:M,formData:c,onBack:()=>t("table"),handleEdit:I,handleAdd:C});case"table":default:return e.jsx(K,{IDPK:S,cardViewFields:W,tableFields:q,dataList:r,handleEdit:I,handleView:D,isCardView:h,setCardView:g})}};return e.jsxs("div",{className:"w-screen md:w-full p-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex space-x-2 justify-between w-full",children:m==="table"&&e.jsx(J,{title:"Manage Courses",handleAdd:C,refresh:x})})}),y()]})};export{le as default};

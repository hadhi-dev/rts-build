import{j as s,L as y}from"./index-CZKKA0SR.js";import{r,e as _}from"./react-vendor-DWPARcIf.js";import{c as u}from"./config-BbshSSl6.js";import{y as a}from"./ui-vendor-TdGwSbkz.js";const j=async t=>{const n=`${u.API_URL}rts/auth/login`;try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw new Error("Network response was not ok");return await o.json()}catch(o){throw console.error("Error in loginAPI:",o),o}},I=()=>{const[t,n]=r.useState({username:"",password:""}),[o,i]=r.useState(!1),[d,m]=r.useState(!1),l=_(),g=r.useRef(null),p=r.useRef(null);r.useEffect(()=>{const e=localStorage.getItem("loginTime"),c=new Date().getTime();e&&c-e>1440*60*1e3&&(localStorage.clear(),a.warning("Session expired. Please login again.",{position:"top-right",autoClose:2e3}),l("/rts/login")),localStorage.getItem("rts_user_uuid")&&l("/rts/dashboard"),g.current.focus()},[l]);const b=e=>{a.success("Login Successful",{position:"bottom-right",autoClose:2e3}),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("rts_user_uuid",e.user_uuid),localStorage.setItem("rts_user_name",e.user_name),localStorage.setItem("rts_user_image",e.user_image),localStorage.setItem("rts_user_type",e.user_type),localStorage.setItem("rts_user_id",e.user_id),localStorage.setItem("rts_user_link_id",e.user_link_id),localStorage.setItem("rts_token",e.token),localStorage.setItem("loginTime",new Date().getTime()),l("/rts/dashboard")},h=async()=>{if(t.username&&t.password){i(!0);try{const e=await j(t),{code:c,message:w,data:x}=e;c===200?b(x):a.error(w,{position:"top-right",autoClose:2e3})}catch(e){a.error("An error occurred during login: "+e.message,{position:"top-right",autoClose:3e3})}finally{i(!1)}}else a.warning("Please enter both username and password.",{position:"top-right",autoClose:2e3})},f=e=>{e.key==="Enter"&&(e.target.id==="username"?p.current.focus():e.target.id==="password"&&h())};return s.jsxs(s.Fragment,{children:[o&&s.jsx(y,{}),s.jsxs("div",{className:"relative flex items-center justify-center w-full h-screen overflow-hidden",children:[!d&&s.jsx("img",{src:`${u.IMAGE_URL}branding/placeholder.jpg`,alt:"Placeholder",className:"absolute top-0 left-0 w-full h-full object-cover"}),s.jsxs("video",{className:"absolute top-0 left-0 w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,onCanPlayThrough:()=>m(!0),onError:()=>m(!1),style:{display:d?"block":"none"},children:[s.jsx("source",{src:"https://raahtechservices.com/documents/images/branding/1738594-hd_1920_1080_30fps.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]}),s.jsxs("div",{className:"w-full max-w-sm p-8 m-2 bg-white rounded-md shadow-lg backdrop-blur-lg bg-opacity-80",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("a",{href:"/",children:s.jsx("img",{src:`${u.IMAGE_URL}branding/logo1.png`,alt:"Company Logo",className:"w-48 h-auto mx-auto"})}),s.jsx("h2",{className:"text-lg font-semibold text-gray-800 mt-4",children:"Login to Job Portal"}),s.jsx("p",{className:"text-sm text-gray-700",children:"Welcome! Please fill in your credentials."})]}),s.jsxs("form",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm text-gray-600",children:"User Name"}),s.jsx("input",{type:"text",id:"username",ref:g,value:t.username,onChange:e=>n({...t,username:e.target.value}),onKeyDown:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:border-blue-400 bg-white dark:bg-white dark:bg-opacity-80"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm text-gray-600",children:"Password"}),s.jsx("input",{type:"password",id:"password",ref:p,value:t.password,onChange:e=>n({...t,password:e.target.value}),onKeyDown:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:border-blue-400 bg-white dark:bg-white dark:bg-opacity-80"})]}),s.jsx("button",{type:"button",className:"w-full px-4 py-2 text-white bg-blue-700 rounded-md hover:bg-blue-600",onClick:h,children:"Login"})]})]})]})]})};export{I as default};

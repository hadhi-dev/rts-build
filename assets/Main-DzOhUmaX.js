import{j as e,r as d,E as H}from"./index-B9FQTHBN.js";import{C as _,I as $,H as K,V as W,R as G,T as B,a as O,b as Q,c as Z}from"./TableView-CNVg7RTX.js";import{B as u}from"./ButtonMini-yjjduiBc.js";import{P as q}from"./PostAPI-Dm7qi3aC.js";import{y as T}from"./CONSTANTS-7ARGwVCX.js";import{c as z}from"./config-BbshSSl6.js";import"./with-selector-qQzuODva.js";/* empty css                      */const R={UserIDPK:0,UserName:"",UserEmail:"",UserPassword:"",UserContact:"",UserMenuRights:"",IsSuperUser:!1,IsAdmin:!1,IsDefault:!1,IsUserLogin:"",UserGroupID:"",UserGroupName:"",FirstName:"",LastName:"",DateOfBirth:"",Gender:"",Address:"",City:"",State:"",ZipCode:"",Country:"",ProfilePicture:"",LastLoginTime:"",FailedLoginAttempts:"",AccountLocked:"",AccountExpiryDate:"",ResetPasswordToken:"",SecurityQuestion:"",SecurityAnswer:"",IsActive:!0,IsDraft:!1,DeleStat:"",Remarks:"",CreatedUserID:localStorage.getItem("uid"),UpdatedUserID:0,CreatedTtm:"",UpdatedTtm:""},J=[{fieldName:"UserName",type:"text",label:"User Name",IsVisible:!0,className:"w-full"},{fieldName:"UserEmail",type:"text",label:"Email",IsVisible:!0,className:"w-full"},{fieldName:"UserContact",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"coursesCount",type:"text",label:"Courses Enrolled",IsVisible:!0,className:"w-1/2"},{fieldName:"IsActive",type:"boolean",label:"Is Active",IsVisible:!0}],X=[{fieldName:"UserName",type:"text",label:"User Name",IsVisible:!0,className:"w-full"},{fieldName:"UserEmail",type:"text",label:"Email",IsVisible:!0,className:"w-1/2"},{fieldName:"UserContact",type:"text",label:"Contact",IsVisible:!0,className:"w-1/2"},{fieldName:"City",type:"text",label:"Width",IsVisible:!0,className:"w-full"},{fieldName:"IsActive",type:"boolean",label:"Is Active",IsVisible:!0}],M=[{label:"Intern Name",fieldName:"UserName",type:"text",className:"w-full md:w-1/2",IsMandatory:1,IsVisible:1,IsDisable:0},{label:"Intern Email",fieldName:"UserEmail",type:"email",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Contact No.",fieldName:"UserContact",type:"number",className:"w-full md:w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0},{label:"Active",fieldName:"IsActive",type:"checkbox",className:"w-1/2",IsMandatory:0,IsVisible:1,IsDisable:0}],Y=({handleSubmit:f,clearForm:c,primID:l,formConfig:r,formData:o,handleChange:m,onBack:t,title:b})=>e.jsxs("form",{onSubmit:f,className:"w-full",children:[e.jsxs("div",{className:"w-full flex gap-2 items-center justify-between",children:[e.jsxs("button",{className:"py-2 text-gray-700 flex items-center hover:bg-gray-200 focus:outline-none rounded-full",onClick:()=>t("table"),children:[e.jsx("i",{className:"material-icons",children:"arrow_back"}),e.jsx("span",{className:"ml-2 text-md font-bold text-blue-600 pr-2",children:b})]}),e.jsxs("div",{className:"w-full flex gap-2 items-center justify-end pr-2",children:[l?e.jsx(u,{className:"hidden md:flex",name:"Close",onClick:t,color:"blue",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"hidden md:flex",name:"Close",onClick:t,color:"red",icon:"close"}),e.jsx(u,{className:"hidden md:flex",name:"Clear",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(u,{className:"hidden md:flex",name:l>0?"Update":"Save",icon:"save",type:"submit",color:"green"})]})]}),e.jsx("div",{className:"w-full flex p-2 gap-2 items-center justify-end",children:r.map(n=>n.type==="checkbox"&&n.IsVisible?e.jsx(_,{field:n,formData:o,handleChange:m},n.fieldName):"")}),e.jsx("div",{className:"w-full flex flex-wrap gap-y-2 mt-4",children:r.map(n=>n.type!=="checkbox"&&n.IsVisible?e.jsx($,{field:n,formData:o,handleChange:m},n.fieldName):null)}),e.jsx("div",{className:"w-full fixed bottom-0 bg-white p-4 md:hidden",children:e.jsxs("div",{className:"flex justify-end gap-1 pr-2",children:[l?e.jsx(u,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}):e.jsxs(e.Fragment,{children:[e.jsx(u,{name:"Close",className:"text-lg",onClick:t,color:"red",icon:"close"}),e.jsx(u,{name:"Clear",className:"text-lg",onClick:c,color:"red",icon:"cancel"})]}),e.jsx(u,{name:l>0?"Update":"Save",icon:"save",type:"submit",color:"blue"})]})})]}),ee=({formConfig:f,formData:c,primID:l,onBack:r,handleEdit:o,handleAdd:m,title:t})=>e.jsx("div",{className:"w-full flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full",children:[e.jsx(K,{title:t,onBack:r,handleEdit:o,handleAdd:m,primID:l}),e.jsx(W,{formConfig:f,formData:c}),e.jsx(G,{onBack:r,handleAdd:m,handleEdit:o,primID:l})]})}),se=({handleAdd:f,title:c,refresh:l,TotalCount:r})=>e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"border border-0 border-l-2 border-blue-600 pl-2 text-md font-bold text-blue-600",children:[c," ",r?`(${r})`:""]}),e.jsx("i",{title:"Refresh",onClick:l,className:"bi bi-arrow-clockwise ml-2 cursor-pointer text-blue-700"})]}),e.jsx("div",{children:e.jsx(u,{className:"hidden md:flex",name:"Add",onClick:f,color:"blue",icon:"add"})})]}),ae=({tableFields:f,cardViewFields:c,dataList:l,handleEdit:r,handleView:o,title:m,isCardView:t,setCardView:b,IDPK:n})=>{const[C,k]=d.useState(""),[h,N]=d.useState(0),[x,y]=d.useState(20),[g,V]=d.useState([null,null]),[w,j]=g,p=(a,P)=>{P(a.target.value),N(0)},v=()=>{b(!t),N(0)},A=({selected:a})=>{N(a)},D=a=>{p(a,y)},U=l.filter(a=>{const I=Object.values(a).join(" ").toLowerCase().includes(C.toLowerCase()),S=new Date(a.CreatedTtm),E=w?new Date(w.setHours(0,0,0,0)):null,L=j?new Date(j.setHours(23,59,59,999)):null,F=(!E||S>=E)&&(!L||S<=L);return I&&F}),s=U.slice(h*x,(h+1)*x),i=Math.ceil(U.length/x);return e.jsxs("div",{className:"p-1",children:[e.jsx(B,{handleSearchChange:a=>p(a,k),searchInput:C,toggleView:v,isCardView:t,handleItemsPerPageChange:D,itemsPerPage:x,setCurrentPage:N,setDateRange:V,startDate:w,endDate:j,count:s.length}),t?e.jsx(O,{data:s,cardViewFields:c,handleEdit:r,handleView:o,title:m,IDPK:n}):e.jsx(Q,{tableFields:f,dataList:s,handleEdit:r,handleView:o,IDPK:n}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white p-2 flex items-center justify-center space-x-2",children:e.jsx(Z,{pageCount:i,pageRangeDisplayed:2,marginPagesDisplayed:1,onPageChange:A,containerClassName:"pagination ml-2",activeClassName:"active",breakClassName:"break-me",pageClassName:"page",pageLinkClassName:"page-link",previousClassName:"previous",previousLinkClassName:"previous-link",nextClassName:"next",nextLinkClassName:"next-link",disabledClassName:"disabled"})})})]})},te="UserIDPK",ue=f=>{const[c,l]=d.useState(R),[r,o]=d.useState([]),[m,t]=d.useState("table"),[b,n]=d.useState(0),[C,k]=d.useState(!1),[h,N]=H(),x=parseInt(h.get("per_page"))||1e3,y=parseInt(h.get("page"))||1;d.useEffect(()=>{g()},[x,y]);const g=async()=>{try{const s=await fetch(`${z.API_URL}users?per_page=${x}&page=${y}&username=`);if(!s.ok)throw new Error(`HTTP error! Status: ${s.status}`);const i=await s.json();o(i.data)}catch(s){console.error("Error fetching data:",s)}},V=s=>{const{name:i,checked:a,type:P}=s.target;if(P==="checkbox")l(I=>({...I,[i]:a}));else{const I=s.target.value;l(S=>({...S,[i]:I}))}},w=async s=>{try{const{status:i,data:a}=await q("user_save",{data:s});i===200&&a.code===200?(T.success(a.message),p(),t("table"),g()):T.warning(a.message)}catch(i){console.error("ðŸš€ ~ file: Main.js:71 ~ saveData ~ error:",i),T.error("something went wrong!")}},j=s=>{s.preventDefault(),w(c)},p=()=>{l(R),n(0)},v=s=>{const i=r.find(a=>a.UserIDPK===s);n(s),l(i),t("entry")},A=s=>{console.log("ðŸš€ ~ file: Main.js:92 ~ handleView ~ id:",s);const i=r.find(a=>a.UserIDPK===s);console.log("ðŸš€ ~ file: Main.js:94 ~ handleView ~ foundUser:",i),n(s),l(i),t("view")},D=()=>{p(),t("entry")},U=()=>{switch(m){case"entry":return e.jsx(Y,{title:"Intern",primID:b,formData:c,formConfig:M,handleChange:V,handleSubmit:j,clearForm:p,onBack:()=>t("table")});case"view":return e.jsx(ee,{title:"Intern",primID:b,formConfig:M,formData:c,onBack:()=>t("table"),handleEdit:v,handleAdd:D});case"table":default:return e.jsx(ae,{IDPK:te,cardViewFields:J,tableFields:X,dataList:r,handleEdit:v,handleView:A,isCardView:C,setCardView:k})}};return e.jsxs("div",{className:"w-screen md:w-full p-2",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("div",{className:"flex space-x-2 justify-between w-full",children:m==="table"&&e.jsx(se,{TotalCount:r.length||0,title:"Interns",handleAdd:D,refresh:g})})}),U()]})};export{ue as default};

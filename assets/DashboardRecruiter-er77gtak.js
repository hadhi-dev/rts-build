import{j as e,L as A}from"./index-COwHQbsL.js";import{r as i}from"./react-vendor-DWPARcIf.js";import{y as C,u as F,af as D,J as k}from"./index-DucPhvMM.js";import{B as p,g as R,D as J,I as S,C as L,a as P,L as B,b as E,c as T,d as I,A as W,p as z,e as Z,f as O}from"./InterviewTimeline-Dryj5oOS.js";import{P as U}from"./PostAPI-Dm7qi3aC.js";import{y as g}from"./ui-vendor-TdGwSbkz.js";import{m as s}from"./proxy-CicwmFvx.js";import"./icons-vendor-iI49wpkt.js";import"./memoize-one.esm-DQq2xVVF.js";import"./inheritsLoose-MEHl_3-6.js";import"./react-lifecycles-compat.es-Bz2kNPGS.js";import"./moment-BndZFSQF.js";import"./config-BbshSSl6.js";L.register(P,B,E,T,I,W,z,Z,O);const se=()=>{const[b,l]=i.useState(!0),[d,h]=i.useState(null);i.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const a=localStorage.getItem("rts_user_uuid"),t=await U("rts/dashboard/recruiter",{user_uuid:a});console.log("Dashboard API Response:",t);const o=t.data;o.code===200?h(o.data):g.error(o.message||"Failed to load dashboard")}catch(a){console.error("Dashboard fetch error:",a),g.error("Failed to load dashboard data")}finally{l(!1)}};if(b)return e.jsx(A,{});if(!d)return e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No data available"});const{metrics:r,jobs_by_status:n,applications_by_stage:c,jobs_by_client:m,recent_applications:y,top_jobs:j,monthly_trend:x}=d,f=[{title:"Clients",value:r.total_clients,icon:e.jsx(C,{className:"text-white text-2xl"}),color:"from-blue-500 to-blue-600"},{title:"Jobs Posted",value:r.total_jobs,icon:e.jsx(F,{className:"text-white text-2xl"}),color:"from-teal-500 to-teal-600"},{title:"Candidates",value:r.total_candidates,icon:e.jsx(D,{className:"text-white text-2xl"}),color:"from-orange-400 to-orange-500"},{title:"Applications",value:r.total_applications,icon:e.jsx(k,{className:"text-white text-2xl"}),color:"from-emerald-500 to-emerald-600"}],N={labels:n.map(a=>a.job_status),datasets:[{label:"Jobs Count",data:n.map(a=>a.count),backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(251, 146, 60, 0.8)"],borderColor:["rgba(34, 197, 94, 1)","rgba(239, 68, 68, 1)","rgba(251, 146, 60, 1)"],borderWidth:2}]},v={labels:c.map(a=>a.stage_name),datasets:[{label:"Applications Count",data:c.map(a=>a.count),backgroundColor:"rgba(99, 102, 241, 0.8)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:2,borderRadius:6}]},w={labels:x.map(a=>a.month),datasets:[{label:"Applications Over Time",data:x.map(a=>a.count),fill:!0,backgroundColor:"rgba(99, 102, 241, 0.1)",borderColor:"rgba(99, 102, 241, 1)",borderWidth:3,tension:.4,pointRadius:5,pointBackgroundColor:"rgba(99, 102, 241, 1)",pointBorderColor:"#fff",pointBorderWidth:2}]},_={labels:m.map(a=>a.client_name),datasets:[{label:"Jobs Posted",data:m.map(a=>a.total_jobs),backgroundColor:"rgba(168, 85, 247, 0.8)",borderColor:"rgba(168, 85, 247, 1)",borderWidth:2,borderRadius:6}]};return e.jsx("div",{className:"p-4 md:p-6 rounded-lg bg-gradient-to-br from-gray-50 to-gray-100 min-h-screen custom-scroll",children:e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:f.map((a,t)=>e.jsxs(s.div,{className:`bg-gradient-to-br ${a.color} p-5 rounded-xl shadow-md hover:shadow-xl transition-all duration-300 cursor-pointer group overflow-hidden relative`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:t*.08},whileHover:{y:-5},children:[e.jsx("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-white/20 backdrop-blur-sm w-fit mb-3",children:a.icon}),e.jsx("p",{className:"text-white/90 text-sm font-medium",children:a.title}),e.jsx("p",{className:"text-white text-3xl font-bold mt-2",children:a.value})]})]},t))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(s.div,{className:"bg-white p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.4},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-emerald-600 rounded mr-3"}),"Applications by Stage"]}),e.jsx("div",{className:"relative h-64",children:e.jsx(p,{data:v,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:"#9CA3AF"},grid:{color:"#F3F4F6"}},x:{ticks:{color:"#9CA3AF"},grid:{color:"transparent"}}}}})})]}),e.jsxs(s.div,{className:"bg-white p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.45},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-teal-600 rounded mr-3"}),"Applications Trend"]}),e.jsx("div",{className:"relative h-64",children:e.jsx(R,{data:w,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{color:"#9CA3AF"},grid:{color:"#F3F4F6"}},x:{ticks:{color:"#9CA3AF"},grid:{color:"transparent"}}}}})})]}),e.jsxs(s.div,{className:"bg-white p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-orange-400 rounded mr-3"}),"Job Status Distribution"]}),e.jsx("div",{className:"relative h-64 flex items-center justify-center",children:e.jsx(J,{data:N,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom",labels:{font:{size:11},padding:15,color:"#374151"}}}}})})]}),e.jsxs(s.div,{className:"bg-white p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.55},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-emerald-600 rounded mr-3"}),"Top Clients by Jobs"]}),e.jsx("div",{className:"relative h-64",children:e.jsx(p,{data:_,options:{responsive:!0,maintainAspectRatio:!1,indexAxis:"y",plugins:{legend:{display:!1}},scales:{x:{beginAtZero:!0,ticks:{color:"#9CA3AF"},grid:{color:"#F3F4F6"}},y:{ticks:{color:"#9CA3AF",font:{size:10}},grid:{color:"transparent"}}}}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(s.div,{className:"bg-white p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.6},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-blue-600 rounded mr-3"}),"Recent Applications"]}),e.jsx("div",{className:"overflow-x-auto max-h-80 custom-scroll",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left p-3 font-semibold text-gray-700",children:"Candidate"}),e.jsx("th",{className:"text-left p-3 font-semibold text-gray-700",children:"Job"}),e.jsx("th",{className:"text-left p-3 font-semibold text-gray-700",children:"Status"})]})}),e.jsx("tbody",{children:y.map((a,t)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"p-3 text-gray-800 font-medium",children:a.candidate_name}),e.jsx("td",{className:"p-3 text-gray-600 text-xs",children:a.job_title}),e.jsx("td",{className:"p-3",children:e.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-emerald-100 text-emerald-700",children:a.status_name})})]},t))})]})})]}),e.jsxs(s.div,{className:"bg-white p-5 rounded-xl shadow-md border border-gray-100",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.65},children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx("span",{className:"w-1 h-6 bg-rose-600 rounded mr-3"}),"Top Performing Jobs"]}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto custom-scroll",children:j.map((a,t)=>e.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm",children:a.job_title}),e.jsxs("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-700",children:[a.application_count," apps"]})]}),e.jsx("p",{className:"text-xs text-gray-600",children:a.client_name}),e.jsx("span",{className:`inline-block mt-2 px-2 py-0.5 rounded text-xs font-medium ${a.job_status==="Open"?"bg-green-100 text-green-700":a.job_status==="Closed"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:a.job_status})]},t))})]})]})]}),e.jsx("div",{className:"xl:col-span-1",children:e.jsx(s.div,{className:"sticky top-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.2},children:e.jsx(S,{})})})]})})};export{se as default};

import{W as x,r as a,j as e,L as b}from"./index-YDNryzlS.js";import{C as m}from"./Card-Bczawnc1.js";import{S as r,P as C}from"./StatCard-uEYstt0c.js";import{R as k,L as v,d as w,g as S}from"./ApiService-DdkrYVvN.js";import{B as T}from"./index-imjLhIPf.js";import{A as I}from"./award-DWanJeNt.js";import"./GetAPI-C0R9K2iB.js";import"./config-BbshSSl6.js";import"./menu-vNSE4_zR.js";import"./user-B9YwJnGP.js";/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],A=x("CalendarCheck",M);/**
 * @license lucide-react v0.483.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],L=x("ClipboardList",D),$=()=>{const[t,h]=a.useState(null),[i,p]=a.useState([]),[g,u]=a.useState([]),[j,c]=a.useState(!1),[d,o]=a.useState(null),y=JSON.parse(localStorage.getItem("udt")),l=localStorage.getItem("usid"),n=async()=>{c(!0),o(null);try{const s=await w(l);(s==null?void 0:s.code)===200?(h(s.data.analytics),p(s.data.tasks)):o("Failed to fetch dashboard analytics")}catch{o("Failed to fetch dashboard analytics")}finally{c(!1)}},f=async()=>{try{const s=await S(l);u(s.data||[])}catch(s){console.error("Failed to fetch courses",s)}};return a.useEffect(()=>{n(),f()},[l]),d?e.jsx("div",{className:"p-6 text-red-500",children:d}):e.jsxs("div",{style:{position:"relative"},children:[j&&e.jsx(b,{position:"absolute"}),e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("h1",{className:"mb-6 text-3xl font-bold text-gray-900",children:["Hello, ",y.username,"!"]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2 rounded-md border border-gray-300 px-3 py-1 text-sm text-gray-600 hover:bg-gray-100",children:[e.jsx(k,{size:16})," Refresh"]})]}),e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(r,{title:"Total Courses",value:(t==null?void 0:t.totalCourses)??0,icon:e.jsx(T,{})}),e.jsx(r,{title:"Active Courses",value:(t==null?void 0:t.activeCourses)??0,icon:e.jsx(v,{}),color:"yellow"}),e.jsx(r,{title:"Tasks Due",value:(t==null?void 0:t.tasksDue)??0,icon:e.jsx(L,{}),color:"red"}),e.jsx(r,{title:"Certificates",value:(t==null?void 0:t.certifiedCourses)??0,icon:e.jsx(I,{}),color:"green"})]}),e.jsx("div",{className:"mb-8 grid grid-cols-1 gap-6 lg:grid-cols-3",children:e.jsxs(m,{className:"lg:col-span-3",children:[e.jsx("h2",{className:"mb-4 text-xl font-bold text-gray-900",children:"Upcoming Deadlines"}),e.jsx("div",{className:"space-y-4",children:i.length>0?i.map(s=>e.jsxs("div",{className:"flex items-center gap-4 rounded-lg bg-gray-50 p-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(A,{className:"text-indigo-600",size:24})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.TaskName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium",children:s.TaskType})," | Code: ",s.TaskCode]})]}),e.jsx("span",{className:`text-sm font-medium ${s.IsComplete?"text-green-600":"text-amber-600"}`,children:s.IsComplete?"Completed":"Open"})]},s.RegistrationIDPK)):e.jsx("p",{className:"text-sm text-gray-500",children:"No upcoming tasks. You are all caught up!"})})]})}),e.jsx("h2",{className:"mb-4 text-2xl font-bold text-gray-900",children:"My Courses"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:g.map((s,N)=>e.jsxs(m,{children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.CourseName}),e.jsxs("span",{className:"text-xs font-medium text-indigo-600",children:[s.completedPercentage||0,"% Complete"]})]}),e.jsx("p",{className:"mb-4 line-clamp-2 text-sm text-gray-600",children:s.ShortDescription}),e.jsx(C,{progress:s.completedPercentage||0}),e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[s.CompletedTask," of ",s.TotalTask," tasks completed"]}),e.jsxs("span",{children:["Instructor: ",s.InstructorName]})]})]},N))})]})};export{$ as default};

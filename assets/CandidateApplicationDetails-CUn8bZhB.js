import{j as t}from"./index-BRtCjCOM.js";import{L as k}from"./Loading-PFELjOwu.js";import{c as M}from"./config-BbshSSl6.js";import{G as y}from"./GetAPI-C0R9K2iB.js";import{f as T}from"./rtsApi-Dl_EsLra.js";import{i as J,h as U,r as a}from"./react-vendor-C96nFidc.js";import{y as u}from"./ui-vendor-CrwEJxT6.js";import{S as w}from"./Sidebar-B0G0OkUM.js";import{T as $,D as G,R as H,C as B,I as F,P as q}from"./ProfileSharing-scZIdks-.js";import"./PostAPI-Dm7qi3aC.js";import"./icons-vendor-D-G97rvP.js";import"./index-Dhm8vqgr.js";import"./ButtonMini-CKiJ8p9B.js";import"./moment-bKu5bFg9.js";import"./memoize-one.esm-DQq2xVVF.js";import"./react-select.esm-DvMdT6fL.js";const ne=()=>{const{job_app_uuid:n}=J(),s=U(),[o,p]=a.useState(0),[_,m]=a.useState(!1),[C,D]=a.useState({}),[c,I]=a.useState({}),[r,N]=a.useState({}),[g,x]=a.useState(""),[h,S]=a.useState(""),[E,j]=a.useState(null),[d,P]=a.useState([]),b=(e,l)=>{e==="logout"?(localStorage.clear(),s("/rts/login")):s("/rts/"+e)},A=()=>{s(-1)};a.useEffect(()=>{if(!localStorage.getItem("rts_user_uuid")){u.error("Please login to view candidate details"),s("/rts/login");return}n&&(L(),v()),p(0)},[n,s]),a.useEffect(()=>{r!=null&&r.application_id&&R()},[r]);const L=async()=>{try{const e=await y("rts/stage_status");e&&P(e)}catch(e){console.error("Error fetching stage status:",e)}},R=async()=>{try{const e=await T(r.application_id);if(e.application){const l=e.application.application_status,i=d.find(f=>f.id==l);i&&(x(i.stage_name),S(i.status_name),j(i.id))}}catch(e){console.error("Error fetching application details:",e)}},v=async()=>{try{m(!0);const e=await y(`rts/job_applications/${n}/candidateDetails`);if(e&&e.data){const{job:l,candidate:i,job_application:f}=e.data;D(l),N(f),I(i)}else console.error("Unexpected API response format:",e),u.error("Failed to load candidate details"),s(-1)}catch(e){console.error("Error fetching job details:",e),u.error("Error loading candidate details"),s(-1)}finally{m(!1)}};return _?t.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 w-full",children:[t.jsx(w,{activeComponent:"jobs",onMenuClick:b}),t.jsx("div",{className:"flex-1 flex items-center justify-center",children:t.jsx(k,{})})]}):t.jsxs("div",{className:"flex flex-col h-screen bg-gray-50 w-full overflow-hidden",children:[t.jsx(w,{activeComponent:"jobs",onMenuClick:b}),t.jsx("div",{className:"flex-1 flex flex-col overflow-hidden",children:t.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[t.jsx("div",{className:"flex-shrink-0 bg-white shadow-sm border-b border-gray-200",children:t.jsx($,{activeTab:o,setActiveTab:p,currentStage:g,currentStatus:h,candidate:c,closeModal:A})}),t.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[o===0&&t.jsx(G,{candidate:c,fetchJobDetails:v}),o===1&&t.jsx(H,{resumeURL:`${M.API_URL}rts/file/get-file?file=${c.resume_url}`}),o===2&&t.jsx(B,{job:C,job_application:r,candidate:c,stageStatus:d,data:{currentStage:g,setCurrentStage:x,currentStatus:h,setCurrentStatus:S,currentStageStatusID:E,setCurrentStageStatusID:j}}),o===3&&t.jsx(F,{job_application:r,stageStatus:d}),o===4&&t.jsx(q,{job_app_uuid:n})]})})]})})]})};export{ne as default};
